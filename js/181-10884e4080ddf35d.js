(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{51721:function(t,e,n){"use strict";n.d(e,{S1:function(){return rd},Kz:function(){return rh},j:function(){return rp}});var r,i,o,s,u,a,c,l,f,d,h,p,v,g,y,m,b,w=function(t,e){return(w=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function E(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var I=function(){return(I=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function _(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function S(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,u)}a((r=r.apply(t,e||[])).next())})}function T(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(a){return function(u){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function O(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function P(t){return this instanceof P?(this.v=t,this):new P(t)}"function"==typeof SuppressedError&&SuppressedError,(r=f||(f={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Verbose=3]="Verbose",r[r.Debug=4]="Debug";var x=function(t){return function(){var e=I({},t.config);return{logger:e.loggerProvider,logLevel:e.logLevel}}},C=function(t,e){var n,r;e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var i=A(e.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(s in t))return;t=t[s]}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},R=function(t,e){return function(){var n,r,i={};try{for(var o=A(e),s=o.next();!s.done;s=o.next()){var u=s.value;i[u]=C(t,u)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}},U=function(t,e,n,r,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=n(),a=u.logger,c=u.logLevel;if(c&&c<f.Debug||!c||!a)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:(Error().stack||"").split("\n").slice(3).map(function(t){return t.trim()}),time:{start:new Date().toISOString()},states:{}};r&&l.states&&(l.states.before=r());var d=t.apply(i,o);return d&&d.promise?d.promise.then(function(){r&&l.states&&(l.states.after=r()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))}):(r&&l.states&&(l.states.after=r()),l.time&&(l.time.end=new Date().toISOString()),a.debug(JSON.stringify(l,null,2))),d}},L=function(t){return{promise:t||Promise.resolve()}};(i=d||(d={})).Unknown="unknown",i.Skipped="skipped",i.Success="success",i.RateLimit="rate_limit",i.PayloadTooLarge="payload_too_large",i.Invalid="invalid",i.Failed="failed",i.Timeout="Timeout",i.SystemError="SystemError";var N="".concat("AMP","_unsent"),B="https://api2.amplitude.com/2/httpapi",D=function(t,e){var n=Math.max(e,1);return t.reduce(function(t,e,r){var i=Math.floor(r/n);return t[i]||(t[i]=[]),t[i].push(e),t},[])},j=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=d.Unknown),{event:t,code:e,message:n}},M="Amplitude Logger ",q=function(){function t(){this.logLevel=f.None}return t.prototype.disable=function(){this.logLevel=f.None},t.prototype.enable=function(t){void 0===t&&(t=f.Warn),this.logLevel=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<f.Verbose||console.log("".concat(M,"[Log]: ").concat(t.join(" ")))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<f.Warn||console.warn("".concat(M,"[Warn]: ").concat(t.join(" ")))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<f.Error||console.error("".concat(M,"[Error]: ").concat(t.join(" ")))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<f.Debug||console.log("".concat(M,"[Debug]: ").concat(t.join(" ")))},t}(),F=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:f.Warn,loggerProvider:new q,offline:!1,optOut:!1,serverUrl:B,serverZone:"US",useBatch:!1}},$=function(){function t(t){this._optOut=!1;var e,n,r,i,o=F();this.apiKey=t.apiKey,this.flushIntervalMillis=null!==(e=t.flushIntervalMillis)&&void 0!==e?e:o.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||o.flushQueueSize,this.instanceName=t.instanceName||o.instanceName,this.loggerProvider=t.loggerProvider||o.loggerProvider,this.logLevel=null!==(n=t.logLevel)&&void 0!==n?n:o.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.offline=void 0!==t.offline?t.offline:o.offline,this.optOut=null!==(r=t.optOut)&&void 0!==r?r:o.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||o.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=null!==(i=t.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=V(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),t}(),V=function(t,e,n){if(void 0===t&&(t=""),void 0===e&&(e=F().serverZone),void 0===n&&(n=F().useBatch),t)return{serverUrl:t,serverZone:void 0};var r,i=["US","EU"].includes(e)?e:F().serverZone;return{serverZone:i,serverUrl:(r=n,"EU"===i?r?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":r?"https://api2.amplitude.com/batch":B)}},z=function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(t,e){this.sdk.metrics.histogram[t]=e},t}(),K=function(t){return t?(t^16*Math.random()>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,K)};function Y(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch(t){}return e}var J=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(t){var e;return S(this,void 0,void 0,function(){var n,r=this;return T(this,function(i){switch(i.label){case 0:return this.config=t,this.storageKey="".concat(N,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(e=this.config.storageProvider)||void 0===e?void 0:e.get(this.storageKey)];case 1:return(n=i.sent())&&n.length>0&&Promise.all(n.map(function(t){return r.execute(t)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(t){var e=this;return t.insert_id||(t.insert_id=K()),new Promise(function(n){e.addToQueue({event:t,attempts:0,callback:function(t){return n(t)},timeout:0})})},t.prototype.getTryableList=function(t){var e=this;return t.filter(function(t){return t.attempts<e.config.flushMaxRetries?(t.attempts+=1,!0):(e.fulfillRequest([t],500,"Event rejected due to exceeded retry count"),!1)})},t.prototype.scheduleTryable=function(t,e){var n=this;void 0===e&&(e=!1),t.forEach(function(t){if(e&&(n.queue=n.queue.concat(t)),0===t.timeout){n.schedule(n.config.flushIntervalMillis);return}setTimeout(function(){t.timeout=0,n.schedule(0)},t.timeout)})},t.prototype.addToQueue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getTryableList(t);this.scheduleTryable(n,!0),this.saveEvents()},t.prototype.schedule=function(t){var e=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){e.flush(!0).then(function(){e.queue.length>0&&e.schedule(t)})},t))},t.prototype.flush=function(t){return void 0===t&&(t=!1),S(this,void 0,void 0,function(){var e,n,r=this;return T(this,function(i){switch(i.label){case 0:if(this.config.offline)return this.config.loggerProvider.debug("Skipping flush while offline."),[2];return e=[],n=[],this.queue.forEach(function(t){return 0===t.timeout?e.push(t):n.push(t)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(D(e,this.config.flushQueueSize).map(function(e){return r.send(e,t)}))];case 1:return i.sent(),this.scheduleTryable(n),[2]}})})},t.prototype.send=function(t,e){return void 0===e&&(e=!0),S(this,void 0,void 0,function(){var n,r,i,o;return T(this,function(s){switch(s.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(t,400,"Event rejected due to missing API key")];n={api_key:this.config.apiKey,events:t.map(function(t){var e=t.event;return e.extra,_(e,["extra"])}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new z,s.label=1;case 1:return s.trys.push([1,3,,4]),r=V(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(r,n)];case 2:if(null===(i=s.sent()))return this.fulfillRequest(t,0,"Unexpected error occurred"),[2];if(!e)return"body"in i?this.fulfillRequest(t,i.statusCode,"".concat(i.status,": ").concat(Y(i))):this.fulfillRequest(t,i.statusCode,i.status),[2];return this.handleResponse(i,t),[3,4];case 3:var u;return o=(u=s.sent())instanceof Error?u.message:String(u),this.config.loggerProvider.error(o),this.handleResponse({status:d.Failed,statusCode:0},t),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(t,e){var n=t.status;switch(n){case d.Success:this.handleSuccessResponse(t,e);break;case d.Invalid:this.handleInvalidResponse(t,e);break;case d.PayloadTooLarge:this.handlePayloadTooLargeResponse(t,e);break;case d.RateLimit:this.handleRateLimitResponse(t,e);break;default:this.config.loggerProvider.warn("{code: 0, error: \"Status '".concat(n,"' provided for ").concat(e.length,' events"}')),this.handleOtherResponse(e)}},t.prototype.handleSuccessResponse=function(t,e){this.fulfillRequest(e,t.statusCode,"Event tracked successfully")},t.prototype.handleInvalidResponse=function(t,e){var n=this;if(t.body.missingField||t.body.error.startsWith("Invalid API key")){this.fulfillRequest(e,t.statusCode,t.body.error);return}var r=new Set(O(O(O(O([],k(Object.values(t.body.eventsWithInvalidFields)),!1),k(Object.values(t.body.eventsWithMissingFields)),!1),k(Object.values(t.body.eventsWithInvalidIdLengths)),!1),k(t.body.silencedEvents),!1).flat()),i=e.filter(function(e,i){if(r.has(i)){n.fulfillRequest([e],t.statusCode,t.body.error);return}return!0});i.length>0&&this.config.loggerProvider.warn(Y(t));var o=this.getTryableList(i);this.scheduleTryable(o)},t.prototype.handlePayloadTooLargeResponse=function(t,e){if(1===e.length){this.fulfillRequest(e,t.statusCode,t.body.error);return}this.config.loggerProvider.warn(Y(t)),this.config.flushQueueSize/=2;var n=this.getTryableList(e);this.scheduleTryable(n)},t.prototype.handleRateLimitResponse=function(t,e){var n=this,r=Object.keys(t.body.exceededDailyQuotaUsers),i=Object.keys(t.body.exceededDailyQuotaDevices),o=t.body.throttledEvents,s=new Set(r),u=new Set(i),a=new Set(o),c=e.filter(function(e,r){if(e.event.user_id&&s.has(e.event.user_id)||e.event.device_id&&u.has(e.event.device_id)){n.fulfillRequest([e],t.statusCode,t.body.error);return}return a.has(r)&&(e.timeout=n.throttleTimeout),!0});c.length>0&&this.config.loggerProvider.warn(Y(t));var l=this.getTryableList(c);this.scheduleTryable(l)},t.prototype.handleOtherResponse=function(t){var e=this,n=t.map(function(t){return t.timeout=t.attempts*e.retryTimeout,t}),r=this.getTryableList(n);this.scheduleTryable(r)},t.prototype.fulfillRequest=function(t,e,n){this.removeEvents(t),t.forEach(function(t){return t.callback(j(t.event,e,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var t=this.queue.map(function(t){return t.event});this.config.storageProvider.set(this.storageKey,t)}},t.prototype.removeEvents=function(t){this.queue=this.queue.filter(function(e){return!t.some(function(t){return t.event.insert_id===e.event.insert_id})}),this.saveEvents()},t}();(o=h||(h={})).SET="$set",o.SET_ONCE="$setOnce",o.ADD="$add",o.APPEND="$append",o.PREPEND="$prepend",o.REMOVE="$remove",o.PREINSERT="$preInsert",o.POSTINSERT="$postInsert",o.UNSET="$unset",o.CLEAR_ALL="$clearAll",(s=p||(p={})).REVENUE_PRODUCT_ID="$productId",s.REVENUE_QUANTITY="$quantity",s.REVENUE_PRICE="$price",s.REVENUE_TYPE="$revenueType",s.REVENUE="$revenue",(u=v||(v={})).IDENTIFY="$identify",u.GROUP_IDENTIFY="$groupidentify",u.REVENUE="revenue_amount";var W=function(t){if(Object.keys(t).length>1e3)return!1;for(var e in t){var n=t[e];if(!Q(e,n))return!1}return!0},Q=function(t,e){var n,r;if("string"!=typeof t)return!1;if(Array.isArray(e)){var i=!0;try{for(var o=A(e),s=o.next();!s.done;s=o.next()){var u=s.value;if(Array.isArray(u))return!1;if("object"==typeof u)i=i&&W(u);else if(!["number","string"].includes(typeof u))return!1;if(!i)return!1}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}else if(null==e)return!1;else if("object"==typeof e)return W(e);else if(!["number","string","boolean"].includes(typeof e))return!1;return!0},H=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return I({},this._properties)},t.prototype.set=function(t,e){return this._safeSet(h.SET,t,e),this},t.prototype.setOnce=function(t,e){return this._safeSet(h.SET_ONCE,t,e),this},t.prototype.append=function(t,e){return this._safeSet(h.APPEND,t,e),this},t.prototype.prepend=function(t,e){return this._safeSet(h.PREPEND,t,e),this},t.prototype.postInsert=function(t,e){return this._safeSet(h.POSTINSERT,t,e),this},t.prototype.preInsert=function(t,e){return this._safeSet(h.PREINSERT,t,e),this},t.prototype.remove=function(t,e){return this._safeSet(h.REMOVE,t,e),this},t.prototype.add=function(t,e){return this._safeSet(h.ADD,t,e),this},t.prototype.unset=function(t){return this._safeSet(h.UNSET,t,"-"),this},t.prototype.clearAll=function(){return this._properties={},this._properties[h.CLEAR_ALL]="-",this},t.prototype._safeSet=function(t,e,n){if(this._validate(t,e,n)){var r=this._properties[t];return void 0===r&&(r={},this._properties[t]=r),r[e]=n,this._propertySet.add(e),!0}return!1},t.prototype._validate=function(t,e,n){return!(void 0!==this._properties[h.CLEAR_ALL]||this._propertySet.has(e))&&(t===h.ADD?"number"==typeof n:t===h.UNSET||t===h.REMOVE||Q(e,n))},t}(),G=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(t){return this.productId=t,this},t.prototype.setQuantity=function(t){return t>0&&(this.quantity=t),this},t.prototype.setPrice=function(t){return this.price=t,this},t.prototype.setRevenueType=function(t){return this.revenueType=t,this},t.prototype.setRevenue=function(t){return this.revenue=t,this},t.prototype.setEventProperties=function(t){return W(t)&&(this.properties=t),this},t.prototype.getEventProperties=function(){var t=this.properties?I({},this.properties):{};return t[p.REVENUE_PRODUCT_ID]=this.productId,t[p.REVENUE_QUANTITY]=this.quantity,t[p.REVENUE_PRICE]=this.price,t[p.REVENUE_TYPE]=this.revenueType,t[p.REVENUE]=this.revenue,t},t}(),Z=function(){function t(t){this.client=t,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(t,e){var n,r;return S(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:if(this.plugins.some(function(e){return e.name===t.name}))return e.loggerProvider.warn("Plugin with name ".concat(t.name," already exists, skipping registration")),[2];return void 0===t.name&&(t.name=K(),e.loggerProvider.warn("Plugin name is undefined. \n      Generating a random UUID for plugin name: ".concat(t.name,". \n      Set a name for the plugin to prevent it from being added multiple times."))),t.type=null!==(n=t.type)&&void 0!==n?n:"enrichment",[4,null===(r=t.setup)||void 0===r?void 0:r.call(t,e,this.client)];case 1:return i.sent(),this.plugins.push(t),[2]}})})},t.prototype.deregister=function(t){var e;return S(this,void 0,void 0,function(){var n,r;return T(this,function(i){switch(i.label){case 0:return n=this.plugins.findIndex(function(e){return e.name===t}),r=this.plugins[n],this.plugins.splice(n,1),[4,null===(e=r.teardown)||void 0===e?void 0:e.call(r)];case 1:return i.sent(),[2]}})})},t.prototype.reset=function(t){this.applying=!1,this.plugins.map(function(t){var e;return null===(e=t.teardown)||void 0===e?void 0:e.call(t)}),this.plugins=[],this.client=t},t.prototype.push=function(t){var e=this;return new Promise(function(n){e.queue.push([t,n]),e.scheduleApply(0)})},t.prototype.scheduleApply=function(t){var e=this;this.applying||(this.applying=!0,setTimeout(function(){e.apply(e.queue.shift()).then(function(){e.applying=!1,e.queue.length>0&&e.scheduleApply(0)})},t))},t.prototype.apply=function(t){return S(this,void 0,void 0,function(){var e,n,r,i,o,s,u,a,c,l,f,d,h,p;return T(this,function(v){switch(v.label){case 0:if(!t)return[2];e=k(t,1)[0],n=k(t,2)[1],r=this.plugins.filter(function(t){return"before"===t.type}),v.label=1;case 1:v.trys.push([1,6,7,8]),o=(i=A(r)).next(),v.label=2;case 2:if(o.done)return[3,5];if(!(s=o.value).execute)return[3,4];return[4,s.execute(I({},e))];case 3:if(null===(u=v.sent()))return n({event:e,code:0,message:""}),[2];e=u,v.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return f={error:v.sent()},[3,8];case 7:try{o&&!o.done&&(d=i.return)&&d.call(i)}finally{if(f)throw f.error}return[7];case 8:a=this.plugins.filter(function(t){return"enrichment"===t.type||void 0===t.type}),v.label=9;case 9:v.trys.push([9,14,15,16]),l=(c=A(a)).next(),v.label=10;case 10:if(l.done)return[3,13];if(!(s=l.value).execute)return[3,12];return[4,s.execute(I({},e))];case 11:if(null===(u=v.sent()))return n({event:e,code:0,message:""}),[2];e=u,v.label=12;case 12:return l=c.next(),[3,10];case 13:return[3,16];case 14:return h={error:v.sent()},[3,16];case 15:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(h)throw h.error}return[7];case 16:return Promise.all(this.plugins.filter(function(t){return"destination"===t.type}).map(function(t){var n=I({},e);return t.execute(n).catch(function(t){return j(n,0,String(t))})})).then(function(t){var r=k(t,1)[0]||j(e,100,"Event not tracked, no destination plugins on the instance");n(r)}),[2]}})})},t.prototype.flush=function(){return S(this,void 0,void 0,function(){var t,e=this;return T(this,function(n){switch(n.label){case 0:return t=this.queue,this.queue=[],[4,Promise.all(t.map(function(t){return e.apply(t)}))];case 1:return n.sent(),[4,Promise.all(this.plugins.filter(function(t){return"destination"===t.type}).map(function(t){return t.flush&&t.flush()}))];case 2:return n.sent(),[2]}})})},t}(),X=function(t,e){return I(I({},e),{event_type:v.IDENTIFY,user_properties:t.getUserProperties()})},tt=function(t,e,n,r){var i;return I(I({},r),{event_type:v.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:((i={})[t]=e,i)})},te=function(t,e,n){var r,i=new H;return i.set(t,e),I(I({},n),{event_type:v.IDENTIFY,user_properties:i.getUserProperties(),groups:((r={})[t]=e,r)})},tn=function(){function t(t){void 0===t&&(t="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Z(this),this.name=t}return t.prototype._init=function(t){return S(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return this.config=t,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return e.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(t){return S(this,void 0,void 0,function(){var e,n,r,i,o,s;return T(this,function(u){switch(u.label){case 0:e=this[t],this[t]=[],u.label=1;case 1:u.trys.push([1,8,9,10]),r=(n=A(e)).next(),u.label=2;case 2:if(r.done)return[3,7];if(!((i=(0,r.value)())&&"promise"in i))return[3,4];return[4,i.promise];case 3:return u.sent(),[3,6];case 4:return[4,i];case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,2];case 7:return[3,10];case 8:return o={error:u.sent()},[3,10];case 9:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}return[7];case 10:if(!this[t].length)return[3,12];return[4,this.runQueuedFunctions(t)];case 11:u.sent(),u.label=12;case 12:return[2]}})})},t.prototype.track=function(t,e,n){var r=I(I(I({},"string"==typeof t?{event_type:t}:t),n),e&&{event_properties:e});return L(this.dispatch(r))},t.prototype.identify=function(t,e){var n=X(t,e);return L(this.dispatch(n))},t.prototype.groupIdentify=function(t,e,n,r){var i=tt(t,e,n,r);return L(this.dispatch(i))},t.prototype.setGroup=function(t,e,n){var r=te(t,e,n);return L(this.dispatch(r))},t.prototype.revenue=function(t,e){var n=I(I({},e),{event_type:v.REVENUE,event_properties:t.getEventProperties()});return L(this.dispatch(n))},t.prototype.add=function(t){return this.isReady?this._addPlugin(t):(this.q.push(this._addPlugin.bind(this,t)),L())},t.prototype._addPlugin=function(t){return L(this.timeline.register(t,this.config))},t.prototype.remove=function(t){return this.isReady?this._removePlugin(t):(this.q.push(this._removePlugin.bind(this,t)),L())},t.prototype._removePlugin=function(t){return L(this.timeline.deregister(t))},t.prototype.dispatchWithCallback=function(t,e){if(!this.isReady)return e(j(t,0,"Client not initialized"));this.process(t).then(e)},t.prototype.dispatch=function(t){return S(this,void 0,void 0,function(){var e=this;return T(this,function(n){return this.isReady?[2,this.process(t)]:[2,new Promise(function(n){e.dispatchQ.push(e.dispatchWithCallback.bind(e,t,n))})]})})},t.prototype.process=function(t){return S(this,void 0,void 0,function(){var e,n;return T(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),this.config.optOut)return[2,j(t,0,"Event skipped due to optOut config")];return[4,this.timeline.push(t)];case 1:return 200===(e=r.sent()).code?this.config.loggerProvider.log(e.message):100===e.code?this.config.loggerProvider.warn(e.message):this.config.loggerProvider.error(e.message),[2,e];case 2:return n=String(r.sent()),this.config.loggerProvider.error(n),[2,e=j(t,0,n)];case 3:return[2]}})})},t.prototype.setOptOut=function(t){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!t));return}this._setOptOut(t)},t.prototype._setOptOut=function(t){this.config.optOut=!!t},t.prototype.flush=function(){return L(this.timeline.flush())},t}(),tr=function(t,e){return"boolean"==typeof t?t:(null==t?void 0:t[e])!==!1},ti=function(t){return tr(t,"attribution")},to=function(t){return tr(t,"pageViews")},ts=function(t){return tr(t,"sessions")},tu=function(t){return"boolean"==typeof t?t:"object"==typeof t&&(!0===t.elementInteractions||"object"==typeof t.elementInteractions)},ta=function(t){if(tu(t.autocapture)&&"object"==typeof t.autocapture&&"object"==typeof t.autocapture.elementInteractions)return t.autocapture.elementInteractions},tc=function(t){var e,n=function(){return!1},r=void 0,i=t.pageCounter;return to(t.defaultTracking)&&(n=void 0,e=void 0,t.defaultTracking&&"object"==typeof t.defaultTracking&&t.defaultTracking.pageViews&&"object"==typeof t.defaultTracking.pageViews&&("trackOn"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(e=t.defaultTracking.pageViews.eventType))),{trackOn:n,trackHistoryChanges:r,eventType:e,pageCounter:i}},tl="dclid",tf="fbclid",td="gbraid",th="gclid",tp="ko_click_id",tv="li_fat_id",tg="msclkid",ty="rtd_cid",tm="ttclid",tb="twclid",tw="wbraid",tE={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},tI=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},t_=function(t,e,n,r){void 0===r&&(r=!0),t.referrer;var i=t.referring_domain,o=_(t,["referrer","referring_domain"]),s=e||{},u=(s.referrer,s.referring_domain),a=_(s,["referrer","referring_domain"]);if(tS(n.excludeReferrers,t.referring_domain)||!r&&Object.values(t).every(function(t){return!t})&&e)return!1;var c=JSON.stringify(o)!==JSON.stringify(a),l=tI(i||"")!==tI(u||"");return!e||c||l},tS=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=""),t.some(function(t){return t instanceof RegExp?t.test(e):t===e})},tT=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},tA=function(){var t="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[t]?globalThis[t]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n.g?n.g:void 0},tk=function(){var t,e=tA();return(null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.search)?e.location.search.substring(1).split("&").filter(Boolean).reduce(function(t,e){var n=e.split("=",2),r=tO(n[0]),i=tO(n[1]);return i&&(t[r]=i),t},{}):{}},tO=function(t){void 0===t&&(t="");try{return decodeURIComponent(t)}catch(t){return""}},tP=function(){function t(){}return t.prototype.parse=function(){return S(this,void 0,void 0,function(){return T(this,function(t){return[2,I(I(I(I({},tE),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var t=tk();return{utm_campaign:t.utm_campaign,utm_content:t.utm_content,utm_id:t.utm_id,utm_medium:t.utm_medium,utm_source:t.utm_source,utm_term:t.utm_term}},t.prototype.getReferrer=function(){var t,e,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=null!==(e=null===(t=n.referrer)||void 0===t?void 0:t.split("/")[2])&&void 0!==e?e:void 0}catch(t){}return n},t.prototype.getClickIds=function(){var t,e=tk();return(t={})[tl]=e[tl],t[tf]=e[tf],t[td]=e[td],t[th]=e[th],t[tp]=e[tp],t[tv]=e[tv],t[tg]=e[tg],t[ty]=e[ty],t[tm]=e[tm],t[tb]=e[tb],t[tw]=e[tw],t},t}(),tx=function(t,e){return void 0===e&&(e=Date.now()),Date.now()-e>t},tC=function(){function t(t,e){var n,r,i;this.shouldTrackNewCampaign=!1,this.options=I({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:tT(null===(n=e.cookieOptions)||void 0===n?void 0:n.domain)},t),this.storage=e.cookieStorage,this.storageKey=(r=e.apiKey,void 0===i&&(i=10),["AMP","MKTG",r.substring(0,i)].filter(Boolean).join("_")),this.currentCampaign=tE,this.sessionTimeout=e.sessionTimeout,this.lastEventTime=e.lastEventTime,e.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return S(this,void 0,void 0,function(){var t,e;return T(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:if(e=k.apply(void 0,[n.sent(),2]),this.currentCampaign=e[0],this.previousCampaign=e[1],t=!this.lastEventTime||tx(this.sessionTimeout,this.lastEventTime),!t_(this.currentCampaign,this.previousCampaign,this.options,t))return[3,3];return this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return S(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,Promise.all([new tP().parse(),this.storage.get(this.storageKey)])];case 1:return[2,t.sent()]}})})},t.prototype.generateCampaignEvent=function(t){this.shouldTrackNewCampaign=!1;var e,n,r=(e=this.currentCampaign,n=this.options,X(Object.entries(I(I({},tE),e)).reduce(function(t,e){var r,i=k(e,2),o=i[0],s=i[1];return(t.setOnce("initial_".concat(o),null!==(r=null!=s?s:n.initialEmptyValue)&&void 0!==r?r:"EMPTY"),s)?t.set(o,s):t.unset(o)},new H)));return t&&(r.event_id=t),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}(),tR=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:tU(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),tU=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},tL=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},t.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach(function(e){t(e)}),this.queue=[])},t}(),tN=function(){return(tN=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},tB=function(t,e){var n=typeof t;if(n!==typeof e)return!1;for(var r=0,i=["string","number","boolean","undefined"];r<i.length;r++)if(i[r]===n)return t===e;if(null==t&&null==e)return!0;if(null==t||null==e||t.length!==e.length)return!1;var o=Array.isArray(t),s=Array.isArray(e);if(o!==s)return!1;if(o&&s){for(var u=0;u<t.length;u++)if(!tB(t[u],e[u]))return!1}else{if(!tB(Object.keys(t).sort(),Object.keys(e).sort()))return!1;var a=!0;return Object.keys(t).forEach(function(n){tB(t[n],e[n])||(a=!1)}),a}return!0};Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var tD=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var t=this,e=tN({},this.identity.userProperties),n=tN(tN({},this.identity),{userProperties:e});return{setUserId:function(t){return n.userId=t,this},setDeviceId:function(t){return n.deviceId=t,this},setUserProperties:function(t){return n.userProperties=t,this},setOptOut:function(t){return n.optOut=t,this},updateUserProperties:function(t){for(var e=n.userProperties||{},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],s=o[0],u=o[1];switch(s){case"$set":for(var a=0,c=Object.entries(u);a<c.length;a++){var l=c[a],f=l[0],d=l[1];e[f]=d}break;case"$unset":for(var h=0,p=Object.keys(u);h<p.length;h++){var f=p[h];delete e[f]}break;case"$clearAll":e={}}}return n.userProperties=e,this},commit:function(){return t.setIdentity(n),this}}},t.prototype.getIdentity=function(){return tN({},this.identity)},t.prototype.setIdentity=function(t){var e=tN({},this.identity);this.identity=tN({},t),tB(e,this.identity)||this.listeners.forEach(function(e){e(t)})},t.prototype.addIdentityListener=function(t){this.listeners.add(t)},t.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},t}(),tj="undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:self,tM=function(){function t(){this.identityStore=new tD,this.eventBridge=new tL,this.applicationContextProvider=new tR}return t.getInstance=function(e){return tj.analyticsConnectorInstances||(tj.analyticsConnectorInstances={}),tj.analyticsConnectorInstances[e]||(tj.analyticsConnectorInstances[e]=new t),tj.analyticsConnectorInstances[e]},t}(),tq=function(t){return void 0===t&&(t="$default_instance"),tM.getInstance(t)},tF=function(t,e){tq(e).identityStore.editIdentity().setUserId(t).commit()},t$=function(t,e){tq(e).identityStore.editIdentity().setDeviceId(t).commit()},tV=function(){function t(){this.name="identity",this.type="before",this.identityStore=tq().identityStore}return t.prototype.execute=function(t){return S(this,void 0,void 0,function(){var e;return T(this,function(n){return(e=t.user_properties)&&this.identityStore.editIdentity().updateUserProperties(e).commit(),[2,t]})})},t.prototype.setup=function(t){return S(this,void 0,void 0,function(){return T(this,function(e){return t.instanceName&&(this.identityStore=tq(t.instanceName).identityStore),[2]})})},t}(),tz=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.name,o=r.args,s=r.resolve,u=t&&t[i];if("function"==typeof u){var a=u.apply(t,o);"function"==typeof s&&s(null==a?void 0:a.promise)}}return t},tK=function(t){return t&&void 0!==t._q},tY=function(){if("undefined"==typeof navigator)return"";var t,e,n,r,i=navigator.userLanguage;return null!==(r=null!==(n=null!==(e=null===(t=navigator.languages)||void 0===t?void 0:t[0])&&void 0!==e?e:navigator.language)&&void 0!==n?n:i)&&void 0!==r?r:""},tJ=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat("2.11.6"),"undefined"!=typeof navigator&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(t){return this.config=t,Promise.resolve(void 0)},t.prototype.execute=function(t){var e,n;return S(this,void 0,void 0,function(){var r,i,o;return T(this,function(s){return r=new Date().getTime(),i=null!==(e=this.config.lastEventId)&&void 0!==e?e:-1,o=null!==(n=t.event_id)&&void 0!==n?n:i+1,this.config.lastEventId=o,t.time||(this.config.lastEventTime=r),[2,I(I(I(I(I(I(I(I({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:r},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:tY()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:K(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),t),{event_id:o,library:this.library,user_agent:this.userAgent})]})})},t}(),tW=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return S(this,void 0,void 0,function(){return T(this,function(t){return[2,!0]})})},t.prototype.get=function(t){return S(this,void 0,void 0,function(){return T(this,function(e){return[2,this.memoryStorage.get(t)]})})},t.prototype.getRaw=function(t){return S(this,void 0,void 0,function(){var e;return T(this,function(n){switch(n.label){case 0:return[4,this.get(t)];case 1:return[2,(e=n.sent())?JSON.stringify(e):void 0]}})})},t.prototype.set=function(t,e){return S(this,void 0,void 0,function(){return T(this,function(n){return this.memoryStorage.set(t,e),[2]})})},t.prototype.remove=function(t){return S(this,void 0,void 0,function(){return T(this,function(e){return this.memoryStorage.delete(t),[2]})})},t.prototype.reset=function(){return S(this,void 0,void 0,function(){return T(this,function(t){return this.memoryStorage.clear(),[2]})})},t}(),tQ=function(t,e,n){return void 0===e&&(e=""),void 0===n&&(n=10),["AMP",e,t.substring(0,n)].filter(Boolean).join("_")},tH=function(){function t(t){this.options=I({},t)}return t.prototype.isEnabled=function(){return S(this,void 0,void 0,function(){var e,n;return T(this,function(r){switch(r.label){case 0:if(!tA())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,e.set(n,t.testValue)];case 2:return r.sent(),[4,e.get(n)];case 3:return[2,r.sent()===t.testValue];case 4:return r.sent(),[2,!1];case 5:return[4,e.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(t){var e;return S(this,void 0,void 0,function(){var n,r;return T(this,function(i){switch(i.label){case 0:return[4,this.getRaw(t)];case 1:if(!(n=i.sent()))return[2,void 0];try{if(r=null!==(e=tG(n))&&void 0!==e?e:tZ(n),void 0===r)return console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(t,", value: ").concat(n)),[2,void 0];return[2,JSON.parse(r)]}catch(e){return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(t,", value: ").concat(n)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(t){var e,n;return S(this,void 0,void 0,function(){var r,i;return T(this,function(o){return(i=(null!==(n=null===(e=null==(r=tA())?void 0:r.document)||void 0===e?void 0:e.cookie.split("; "))&&void 0!==n?n:[]).find(function(e){return 0===e.indexOf(t+"=")}))?[2,i.substring(t.length+1)]:[2,void 0]})})},t.prototype.set=function(t,e){var n;return S(this,void 0,void 0,function(){var r,i,o,s,u,a,c;return T(this,function(l){try{r=null!==(n=this.options.expirationDays)&&void 0!==n?n:0,i=null!==e?r:-1,o=void 0,i&&((s=new Date).setTime(s.getTime()+864e5*i),o=s),u="".concat(t,"=").concat(btoa(encodeURIComponent(JSON.stringify(e)))),o&&(u+="; expires=".concat(o.toUTCString())),u+="; path=/",this.options.domain&&(u+="; domain=".concat(this.options.domain)),this.options.secure&&(u+="; Secure"),this.options.sameSite&&(u+="; SameSite=".concat(this.options.sameSite)),(a=tA())&&(a.document.cookie=u)}catch(e){c=e instanceof Error?e.message:String(e),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(t,". Error: ").concat(c))}return[2]})})},t.prototype.remove=function(t){return S(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,this.set(t,null)];case 1:return e.sent(),[2]}})})},t.prototype.reset=function(){return S(this,void 0,void 0,function(){return T(this,function(t){return[2]})})},t}(),tG=function(t){try{return decodeURIComponent(atob(t))}catch(t){return}},tZ=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch(t){return}},tX=function(){function t(){}return t.prototype.send=function(t,e){return Promise.resolve(null)},t.prototype.buildResponse=function(t){if("object"!=typeof t)return null;var e,n,r,i,o,s,u,a,c,l,f,h,p,v,g,y,m,b,w,E,I,_,S=t.code||0,T=this.buildStatus(S);switch(T){case d.Success:return{status:T,statusCode:S,body:{eventsIngested:null!==(e=t.events_ingested)&&void 0!==e?e:0,payloadSizeBytes:null!==(n=t.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(r=t.server_upload_time)&&void 0!==r?r:0}};case d.Invalid:return{status:T,statusCode:S,body:{error:null!==(i=t.error)&&void 0!==i?i:"",missingField:null!==(o=t.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=t.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(u=t.events_with_missing_fields)&&void 0!==u?u:{},eventsWithInvalidIdLengths:null!==(a=t.events_with_invalid_id_lengths)&&void 0!==a?a:{},epsThreshold:null!==(c=t.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=t.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(f=t.silenced_devices)&&void 0!==f?f:[],silencedEvents:null!==(h=t.silenced_events)&&void 0!==h?h:[],throttledDevices:null!==(p=t.throttled_devices)&&void 0!==p?p:{},throttledEvents:null!==(v=t.throttled_events)&&void 0!==v?v:[]}};case d.PayloadTooLarge:return{status:T,statusCode:S,body:{error:null!==(g=t.error)&&void 0!==g?g:""}};case d.RateLimit:return{status:T,statusCode:S,body:{error:null!==(y=t.error)&&void 0!==y?y:"",epsThreshold:null!==(m=t.eps_threshold)&&void 0!==m?m:0,throttledDevices:null!==(b=t.throttled_devices)&&void 0!==b?b:{},throttledUsers:null!==(w=t.throttled_users)&&void 0!==w?w:{},exceededDailyQuotaDevices:null!==(E=t.exceeded_daily_quota_devices)&&void 0!==E?E:{},exceededDailyQuotaUsers:null!==(I=t.exceeded_daily_quota_users)&&void 0!==I?I:{},throttledEvents:null!==(_=t.throttled_events)&&void 0!==_?_:[]}};case d.Timeout:default:return{status:T,statusCode:S}}},t.prototype.buildStatus=function(t){return t>=200&&t<300?d.Success:429===t?d.RateLimit:413===t?d.PayloadTooLarge:408===t?d.Timeout:t>=400&&t<500?d.Invalid:t>=500?d.Failed:d.Unknown},t}(),t0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.send=function(t,e){return S(this,void 0,void 0,function(){var n,r;return T(this,function(i){switch(i.label){case 0:if("undefined"==typeof fetch)throw Error("FetchTransport is not supported");return[4,fetch(t,{headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(e),method:"POST"})];case 1:return[4,(n=i.sent()).text()];case 2:r=i.sent();try{return[2,this.buildResponse(JSON.parse(r))]}catch(t){return[2,this.buildResponse({code:n.status})]}return[2]}})})},e}(tX),t1=function(){function t(t){this.storage=t}return t.prototype.isEnabled=function(){return S(this,void 0,void 0,function(){var e,n,r;return T(this,function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),r="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,n.set(r,e)];case 2:return i.sent(),[4,n.get(r)];case 3:return[2,i.sent()===e];case 4:return i.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(t){return S(this,void 0,void 0,function(){var e;return T(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(t)];case 1:if(!(e=n.sent()))return[2,void 0];return[2,JSON.parse(e)];case 2:return n.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(t){var e;return S(this,void 0,void 0,function(){return T(this,function(n){return[2,(null===(e=this.storage)||void 0===e?void 0:e.getItem(t))||void 0]})})},t.prototype.set=function(t,e){var n;return S(this,void 0,void 0,function(){return T(this,function(r){try{null===(n=this.storage)||void 0===n||n.setItem(t,JSON.stringify(e))}catch(t){}return[2]})})},t.prototype.remove=function(t){var e;return S(this,void 0,void 0,function(){return T(this,function(n){try{null===(e=this.storage)||void 0===e||e.removeItem(t)}catch(t){}return[2]})})},t.prototype.reset=function(){var t;return S(this,void 0,void 0,function(){return T(this,function(e){try{null===(t=this.storage)||void 0===t||t.clear()}catch(t){}return[2]})})},t}(),t2=function(t){function e(e){var n,r=this;return(r=t.call(this,null===(n=tA())||void 0===n?void 0:n.localStorage)||this).loggerProvider=null==e?void 0:e.loggerProvider,r}return E(e,t),e.prototype.set=function(e,n){var r;return S(this,void 0,void 0,function(){var i;return T(this,function(o){switch(o.label){case 0:if(!(Array.isArray(n)&&n.length>1e3))return[3,2];return i=n.length-1e3,[4,t.prototype.set.call(this,e,n.slice(0,1e3))];case 1:return o.sent(),null===(r=this.loggerProvider)||void 0===r||r.error("Failed to save ".concat(i," events because the queue length exceeded ").concat(1e3,".")),[3,4];case 2:return[4,t.prototype.set.call(this,e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e}(t1),t4=function(t){function e(){var e;return t.call(this,null===(e=tA())||void 0===e?void 0:e.sessionStorage)||this}return E(e,t),e}(t1),t3=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={done:4},e}return E(e,t),e.prototype.send=function(t,e){return S(this,void 0,void 0,function(){var n=this;return T(this,function(r){return[2,new Promise(function(r,i){"undefined"==typeof XMLHttpRequest&&i(Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",t,!0),o.onreadystatechange=function(){if(o.readyState===n.state.done){var t=o.responseText;try{r(n.buildResponse(JSON.parse(t)))}catch(t){r(n.buildResponse({code:o.status}))}}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(e))})]})})},e}(tX),t6=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.send=function(t,e){return S(this,void 0,void 0,function(){var n=this;return T(this,function(r){return[2,new Promise(function(r,i){var o=tA();if(!(null==o?void 0:o.navigator.sendBeacon))throw Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(e);if(o.navigator.sendBeacon(t,JSON.stringify(e)))return r(n.buildResponse({code:200,events_ingested:e.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}));return r(n.buildResponse({code:500}))}catch(t){i(t)}})]})})},e}(tX),t5=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},t8=function(t){if(atob&&escape&&t)try{return decodeURIComponent(escape(atob(t)))}catch(t){return}},t7="[Amplitude]",t9="".concat(t7," Form Started"),et="".concat(t7," Form Submitted"),ee="".concat(t7," File Downloaded"),en="session_start",er="session_end",ei="".concat(t7," File Extension"),eo="".concat(t7," File Name"),es="".concat(t7," Link ID"),eu="".concat(t7," Link Text"),ea="".concat(t7," Link URL"),ec="".concat(t7," Form ID"),el="".concat(t7," Form Name"),ef="".concat(t7," Form Destination"),ed="cookie",eh=function(t){function e(e,n,r,i,o,s,u,a,c,l,d,h,p,v,g,y,m,b,w,E,I,_,S,T,A,k,O,P,x,C,R,U,L,N){void 0===r&&(r=new tW),void 0===i&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===a&&(a=1e3),void 0===c&&(c=5),void 0===l&&(l=30),void 0===d&&(d=ed),void 0===y&&(y=new q),void 0===m&&(m=f.Warn),void 0===w&&(w=!1),void 0===E&&(E=!1),void 0===S&&(S=""),void 0===T&&(T="US"),void 0===k&&(k=18e5),void 0===O&&(O=new t2({loggerProvider:y})),void 0===P&&(P={ipAddress:!0,language:!0,platform:!0}),void 0===x&&(x="fetch"),void 0===C&&(C=!1),void 0===R&&(R=!1);var B=t.call(this,{apiKey:e,storageProvider:O,transportProvider:ev(x)})||this;return B.apiKey=e,B.appVersion=n,B.cookieOptions=i,B.defaultTracking=o,B.autocapture=s,B.flushIntervalMillis=a,B.flushMaxRetries=c,B.flushQueueSize=l,B.identityStorage=d,B.ingestionMetadata=h,B.instanceName=p,B.loggerProvider=y,B.logLevel=m,B.minIdLength=b,B.offline=w,B.partnerId=I,B.plan=_,B.serverUrl=S,B.serverZone=T,B.sessionTimeout=k,B.storageProvider=O,B.trackingOptions=P,B.transport=x,B.useBatch=C,B.fetchRemoteConfig=R,B._optOut=!1,B._cookieStorage=r,B.deviceId=u,B.lastEventId=v,B.lastEventTime=g,B.optOut=E,B.sessionId=A,B.pageCounter=L,B.userId=U,B.debugLogsEnabled=N,B.loggerProvider.enable(N?f.Debug:B.logLevel),B}return E(e,t),Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(t){this._cookieStorage!==t&&(this._cookieStorage=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(t){this._deviceId!==t&&(this._deviceId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(t){this._userId!==t&&(this._userId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(t){this._sessionId!==t&&(this._sessionId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut!==t&&(this._optOut=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(t){this._lastEventTime!==t&&(this._lastEventTime=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(t){this._lastEventId!==t&&(this._lastEventId=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(t){this._pageCounter!==t&&(this._pageCounter=t,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(t){this._debugLogsEnabled!==t&&(this._debugLogsEnabled=t,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var t={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(tQ(this.apiKey),t)},e}($),ep=function(t,e){switch(void 0===t&&(t=ed),void 0===e&&(e={}),t){case"localStorage":return new t2;case"sessionStorage":return new t4;case"none":return new tW;default:return new tH(I(I({},e),{expirationDays:e.expiration}))}},ev=function(t){return"xhr"===t?new t3:"beacon"===t?new t6:new t0},eg=function(t){var e={};for(var n in t){var r=t[n];r&&(e[n]=r)}return e},ey=function(t){void 0===t&&(t={});var e,n,r,i=tA(),o=void 0,s=t.trackOn,u=t.trackHistoryChanges,a=t.eventType,c=void 0===a?"[Amplitude] Page Viewed":a,l=function(t){var e=t;try{e=decodeURI(t)}catch(t){null==o||o.error("Malformed URI sequence: ",t)}return e},f=function(){return S(void 0,void 0,void 0,function(){var t,e,n;return T(this,function(r){switch(r.label){case 0:return t=l("undefined"!=typeof location&&location.href||""),n={event_type:c},e=[{}],[4,em()];case 1:return[2,(n.event_properties=I.apply(void 0,[I.apply(void 0,e.concat([r.sent()])),{"[Amplitude] Page Domain":"undefined"!=typeof location&&location.hostname||"","[Amplitude] Page Location":t,"[Amplitude] Page Path":"undefined"!=typeof location&&l(location.pathname)||"","[Amplitude] Page Title":"undefined"!=typeof document&&document.title||"","[Amplitude] Page URL":t.split("?")[0]}]),n)]}})})},d=function(){return void 0===s||"function"==typeof s&&s()},h="undefined"!=typeof location?location.href:null,p=function(){return S(void 0,void 0,void 0,function(){var t,n,r,i;return T(this,function(s){switch(s.label){case 0:if(n=ew(u,t=location.href,h||"")&&d(),h=t,!n)return[3,4];if(null==o||o.log("Tracking page view event"),null!=e)return[3,1];return[3,3];case 1:return i=(r=e).track,[4,f()];case 2:i.apply(r,[s.sent()]),s.label=3;case 3:s.label=4;case 4:return[2]}})})},v=function(){p()};return{name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(t,s){return S(void 0,void 0,void 0,function(){var u,a;return T(this,function(c){switch(c.label){case 0:if(e=s,r=t,(o=t.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",v),n=i.history.pushState,i.history.pushState=new Proxy(i.history.pushState,{apply:function(t,e,n){var r=k(n,3),i=r[0],o=r[1],s=r[2];t.apply(e,[i,o,s]),p()}})),!d())return[3,2];return o.log("Tracking page view event"),a=(u=e).track,[4,f()];case 1:a.apply(u,[c.sent()]),c.label=2;case 2:return[2]}})})},execute:function(t){return S(void 0,void 0,void 0,function(){var e;return T(this,function(n){switch(n.label){case 0:if(!("attribution"===s&&eb(t)))return[3,2];return null==o||o.log("Enriching campaign event to page view event with campaign parameters"),[4,f()];case 1:e=n.sent(),t.event_type=e.event_type,t.event_properties=I(I({},t.event_properties),e.event_properties),n.label=2;case 2:return r&&t.event_type===c&&(r.pageCounter=r.pageCounter?r.pageCounter+1:1,t.event_properties=I(I({},t.event_properties),{"[Amplitude] Page Counter":r.pageCounter})),[2,t]}})})},teardown:function(){return S(void 0,void 0,void 0,function(){return T(this,function(t){return i&&(i.removeEventListener("popstate",v),n&&(i.history.pushState=n)),[2]})})}}},em=function(){return S(void 0,void 0,void 0,function(){var t;return T(this,function(e){switch(e.label){case 0:return t=eg,[4,new tP().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},eb=function(t){if("$identify"===t.event_type&&t.user_properties){var e=t.user_properties,n=e[h.SET]||{},r=e[h.UNSET]||{},i=O(O([],k(Object.keys(n)),!1),k(Object.keys(r)),!1);return Object.keys(tE).every(function(t){return i.includes(t)})}return!1},ew=function(t,e,n){if("pathOnly"===t){if(""==n)return!0;var r=new URL(e),i=new URL(n);return r.origin+r.pathname!==i.origin+i.pathname}return e!==n},eE=function(){var t,e=[],n=function(t,n,r){t.addEventListener(n,r),e.push({element:t,type:n,handler:r})},r=function(){e.forEach(function(t){var e=t.element,n=t.type,r=t.handler;null==e||e.removeEventListener(n,r)}),e=[]};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(e,r){return S(void 0,void 0,void 0,function(){var i;return T(this,function(o){return null===(i=tA())||void 0===i||i.addEventListener("load",function(){if(!r){e.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if("undefined"!=typeof document){var i=function(t){var e=!1;n(t,"change",function(){var n;e||r.track(t9,((n={})[ec]=eI(t.id),n[el]=eI(t.name),n[ef]=t.action,n)),e=!0}),n(t,"submit",function(){var n,i;e||r.track(t9,((n={})[ec]=eI(t.id),n[el]=eI(t.name),n[ef]=t.action,n)),r.track(et,((i={})[ec]=eI(t.id),i[el]=eI(t.name),i[ef]=t.action,i)),e=!1})};Array.from(document.getElementsByTagName("form")).forEach(i),"undefined"!=typeof MutationObserver&&(t=new MutationObserver(function(t){t.forEach(function(t){t.addedNodes.forEach(function(t){"FORM"===t.nodeName&&i(t),"querySelectorAll"in t&&"function"==typeof t.querySelectorAll&&Array.from(t.querySelectorAll("form")).map(i)})})})).observe(document.body,{subtree:!0,childList:!0})}}),[2]})})},execute:function(t){return S(void 0,void 0,void 0,function(){return T(this,function(e){return[2,t]})})},teardown:function(){return S(void 0,void 0,void 0,function(){return T(this,function(e){return null==t||t.disconnect(),r(),[2]})})}}},eI=function(t){if("string"==typeof t)return t},e_=function(){var t,e=[],n=function(t,n,r){t.addEventListener(n,r),e.push({element:t,type:n,handler:r})},r=function(){e.forEach(function(t){var e=t.element,n=t.type,r=t.handler;null==e||e.removeEventListener(n,r)}),e=[]};return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(e,r){return S(void 0,void 0,void 0,function(){var i;return T(this,function(o){return null===(i=tA())||void 0===i||i.addEventListener("load",function(){if(!r){e.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if("undefined"!=typeof document){var i=function(t){try{e=new URL(t.href,window.location.href)}catch(t){return}var e,i=o.exec(e.href),s=null==i?void 0:i[1];s&&n(t,"click",function(){var n;s&&r.track(ee,((n={})[ei]=s,n[eo]=e.pathname,n[es]=t.id,n[eu]=t.text,n[ea]=t.href,n))})},o=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/;Array.from(document.getElementsByTagName("a")).forEach(i),"undefined"!=typeof MutationObserver&&(t=new MutationObserver(function(t){t.forEach(function(t){t.addedNodes.forEach(function(t){"A"===t.nodeName&&i(t),"querySelectorAll"in t&&"function"==typeof t.querySelectorAll&&Array.from(t.querySelectorAll("a")).map(i)})})})).observe(document.body,{subtree:!0,childList:!0})}}),[2]})})},execute:function(t){return S(void 0,void 0,void 0,function(){return T(this,function(e){return[2,t]})})},teardown:function(){return S(void 0,void 0,void 0,function(){return T(this,function(e){return null==t||t.disconnect(),r(),[2]})})}}},eS=!1,eT=function(t){eS||void 0!==t.defaultTracking||(t.loggerProvider.warn("`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\n\namplitude.init(<YOUR_API_KEY>, {\n  defaultTracking: true,\n});\n\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details."),eS=!0)},eA=function(){var t=tA(),e=[],n=function(n,r){t&&(t.addEventListener(n,r),e.push({type:n,handler:r}))},r=function(){e.forEach(function(e){var n=e.type,r=e.handler;t&&t.removeEventListener(n,r)}),e=[]};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(t,e){return S(void 0,void 0,void 0,function(){return T(this,function(r){return t.offline=!navigator.onLine,n("online",function(){t.loggerProvider.debug("Network connectivity changed to online."),t.offline=!1,setTimeout(function(){e.flush()},t.flushIntervalMillis)}),n("offline",function(){t.loggerProvider.debug("Network connectivity changed to offline."),t.offline=!0}),[2]})})},teardown:function(){return S(void 0,void 0,void 0,function(){return T(this,function(t){return r(),[2]})})}}};(a=g||(g={})).US="US",a.EU="EU";var ek="Remote config fetch rejected due to timeout after 5 seconds",eO=function(){function t(t){var e=t.localConfig,n=t.configKeys,r=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(t,e,n){return S(r,void 0,void 0,function(){var r,i,o;return T(this,function(s){switch(s.label){case 0:return r=Date.now(),[4,this.fetchWithTimeout(n)];case 1:if((i=s.sent())&&(o=i.configs&&i.configs[t]))return this.metrics.fetchTimeAPISuccess=Date.now()-r,[2,o[e]];return this.metrics.fetchTimeAPIFail=Date.now()-r,[2,void 0]}})})},this.fetchWithTimeout=function(t){return S(r,void 0,void 0,function(){var e,n,r;return T(this,function(i){switch(i.label){case 0:return e=new AbortController,n=setTimeout(function(){return e.abort()},5e3),[4,this.fetchRemoteConfig(e.signal,t)];case 1:return r=i.sent(),clearTimeout(n),[2,r]}})})},this.fetchRemoteConfig=function(t,e){return S(r,void 0,void 0,function(){var n,r,i,o,s,u,a,c,l,f;return T(this,function(h){switch(h.label){case 0:if(e===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(t.aborted)return[2,this.completeRequest({err:ek})];e!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=e,this.attempts=0),h.label=1;case 1:h.trys.push([1,3,,4]),n=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(i=(r=A(this.configKeys)).next();!i.done;i=r.next())o=i.value,n.append("config_keys",o)}catch(t){l={error:t}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(l)throw l.error}}return e&&n.set("session_id",String(e)),s={headers:{Accept:"*/*"},method:"GET"},u="".concat(this.getServerUrl(),"?").concat(n.toString()),this.attempts+=1,[4,fetch(u,I(I({},s),{signal:t}))];case 2:if(null===(a=h.sent()))return[2,this.completeRequest({err:"Unexpected error occurred"})];switch(new tX().buildStatus(a.status)){case d.Success:return this.attempts=0,[2,this.parseAndStoreConfig(a)];case d.Failed:return[2,this.retryFetch(t,e)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:if(c=h.sent(),t.aborted)return[2,this.completeRequest({err:ek})];return[2,this.completeRequest({err:c.message})];case 4:return[2]}})})},this.retryFetch=function(t,e){return S(r,void 0,void 0,function(){var n=this;return T(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t){return setTimeout(t,n.attempts*n.retryTimeout)})];case 1:return r.sent(),[2,this.fetchRemoteConfig(t,e)]}})})},this.parseAndStoreConfig=function(t){return S(r,void 0,void 0,function(){var e;return T(this,function(n){switch(n.label){case 0:return[4,t.json()];case 1:return e=n.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,e]}})})},this.localConfig=e,this.configKeys=n}return t.prototype.getServerUrl=function(){return this.localConfig.serverZone===g.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===g.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},t.prototype.completeRequest=function(t){var e=t.err,n=t.success;if(e)throw Error(e);n&&this.localConfig.loggerProvider.log(n)},t}(),eP=function(t){var e=t.localConfig,n=t.configKeys;return S(void 0,void 0,void 0,function(){return T(this,function(t){return[2,new eO({localConfig:e,configKeys:n})]})})},ex=function(){function t(t){this.config=t,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return t.prototype.initialize=function(){return S(this,void 0,void 0,function(){var t;return T(this,function(e){switch(e.label){case 0:return t=this,[4,eP({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return t.remoteConfigFetch=e.sent(),[2]}})})},t.prototype.generateJoinedConfig=function(){var t,e,n,r;return S(this,void 0,void 0,function(){var i,o,s;return T(this,function(u){switch(u.label){case 0:if(u.trys.push([0,3,,4]),!(o=this.remoteConfigFetch))return[3,2];return[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)];case 1:o=u.sent(),u.label=2;case 2:return i=o,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(i,null,2)),i&&"autocapture"in i&&("boolean"==typeof i.autocapture&&(this.config.autocapture=i.autocapture),"object"==typeof i.autocapture&&(void 0===this.config.autocapture&&(this.config.autocapture=i.autocapture),"boolean"==typeof this.config.autocapture&&(this.config.autocapture=I({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture},i.autocapture)),"object"==typeof this.config.autocapture&&(this.config.autocapture=I(I({},this.config.autocapture),i.autocapture))),this.config.defaultTracking=this.config.autocapture),this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),null!==(t=(r=this.config).requestMetadata)&&void 0!==t||(r.requestMetadata=new z),(null===(e=this.remoteConfigFetch)||void 0===e?void 0:e.metrics.fetchTimeAPISuccess)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),(null===(n=this.remoteConfigFetch)||void 0===n?void 0:n.metrics.fetchTimeAPIFail)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return s=u.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",s),[3,4];case 4:return[2,this.config]}})})},t}(),eC=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],eR=["div","span","h1","h2","h3","h4","h5","h6"],eU="[Amplitude] Element Clicked",eL="[Amplitude] Element Tag",eN="[Amplitude] Element Text",eB="[Amplitude] Element Selector",eD="[Amplitude] Page URL",ej="https://app.amplitude.com",eM={US:ej,EU:"https://app.eu.amplitude.com",STAGING:"https://apps.stag2.amplitude.com"},eq="amp-visual-tagging-selector-highlight",eF=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function e$(t){return"function"==typeof t}function eV(t){return e$(null==t?void 0:t.then)}function ez(t){var e=t(function(t){Error.call(t),t.stack=Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var eK=ez(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function eY(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var eJ=function(){var t;function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t,e,n,r,i,o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var s=A(o),u=s.next();!u.done;u=s.next())u.value.remove(this)}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this)}var a=this.initialTeardown;if(e$(a))try{a()}catch(t){i=t instanceof eK?t.errors:[t]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=A(c),f=l.next();!f.done;f=l.next()){var d=f.value;try{eQ(d)}catch(t){i=null!=i?i:[],t instanceof eK?i=O(O([],k(i)),k(t.errors)):i.push(t)}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new eK(i)}},e.prototype.add=function(t){var n;if(t&&t!==this){if(this.closed)eQ(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}},e.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},e.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},e.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&eY(e,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&eY(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function eW(t){return t instanceof eJ||t&&"closed"in t&&e$(t.remove)&&e$(t.add)&&e$(t.unsubscribe)}function eQ(t){e$(t)?t():t.unsubscribe()}eJ.EMPTY;var eH={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},eG={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=eG.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,O([t,e],k(n))):setTimeout.apply(void 0,O([t,e],k(n)))},clearTimeout:function(t){var e=eG.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function eZ(t){eG.setTimeout(function(){var e=eH.onUnhandledError;if(e)e(t);else throw t})}function eX(){}var e0=e1("C",void 0,void 0);function e1(t,e,n){return{kind:t,value:e,error:n}}var e2=null,e4=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,eW(e)&&e.add(n)):n.destination=nt,n}return E(e,t),e.create=function(t,e,n){return new e8(t,e,n)},e.prototype.next=function(t){this.isStopped?e9(e1("N",t,void 0),this):this._next(t)},e.prototype.error=function(t){this.isStopped?e9(e1("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?e9(e0,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(eJ),e3=Function.prototype.bind;function e6(t,e){return e3.call(t,e)}var e5=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){e7(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){e7(t)}else e7(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){e7(t)}},t}(),e8=function(t){function e(e,n,r){var i,o,s=t.call(this)||this;return e$(e)||!e?i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&eH.useDeprecatedNextContext?((o=Object.create(e)).unsubscribe=function(){return s.unsubscribe()},i={next:e.next&&e6(e.next,o),error:e.error&&e6(e.error,o),complete:e.complete&&e6(e.complete,o)}):i=e,s.destination=new e5(i),s}return E(e,t),e}(e4);function e7(t){eH.useDeprecatedSynchronousErrorHandling?eH.useDeprecatedSynchronousErrorHandling&&e2&&(e2.errorThrown=!0,e2.error=t):eZ(t)}function e9(t,e){var n=eH.onStoppedNotification;n&&eG.setTimeout(function(){return n(t,e)})}var nt={closed:!0,next:eX,error:function(t){throw t},complete:eX},ne="function"==typeof Symbol&&Symbol.observable||"@@observable";function nn(t){return t}var nr=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,i=this,o=(r=t)&&r instanceof e4||r&&e$(r.next)&&e$(r.error)&&e$(r.complete)&&eW(r)?t:new e8(t,e,n);return function(t){if(eH.useDeprecatedSynchronousErrorHandling){var e=!e2;if(e&&(e2={errorThrown:!1,error:null}),t(),e){var n=e2,r=n.errorThrown,i=n.error;if(e2=null,r)throw i}}else t()}(function(){var t=i.operator,e=i.source;o.add(t?t.call(o,e):e?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ni(e))(function(e,r){var i=new e8({next:function(e){try{t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)})},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ne]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0===t.length?nn:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ni(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function ni(t){var e;return null!==(e=null!=t?t:eH.Promise)&&void 0!==e?e:Promise}function no(t){return Symbol.asyncIterator&&e$(null==t?void 0:t[Symbol.asyncIterator])}function ns(t){return TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var nu="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function na(t){return e$(null==t?void 0:t[nu])}function nc(t){return function(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(t){return function(e){return Promise.resolve(e).then(t,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(t,e){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})},e&&(r[t]=e(r[t])))}function u(t,e){try{var n;(n=i[t](e)).value instanceof P?Promise.resolve(n.value.v).then(a,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}}function a(t){u("next",t)}function c(t){u("throw",t)}function l(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function(){var e,n,r;return T(this,function(i){switch(i.label){case 0:e=t.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,P(e.read())];case 3:if(r=(n=i.sent()).value,!n.done)return[3,5];return[4,P(void 0)];case 4:return[2,i.sent()];case 5:return[4,P(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function nl(t){return e$(null==t?void 0:t.getReader)}function nf(t){if(t instanceof nr)return t;if(null!=t){if(e$(t[ne]))return new nr(function(e){var n=t[ne]();if(e$(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(eF(t))return new nr(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()});if(eV(t))return new nr(function(e){t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,eZ)});if(no(t))return nd(t);if(na(t))return new nr(function(e){var n,r;try{for(var i=A(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()});if(nl(t))return nd(nc(t))}throw ns(t)}function nd(t){return new nr(function(e){(function(t,e){var n,r,i,o;return S(this,void 0,void 0,function(){var s;return T(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=function(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=A(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,i,(e=t[n](e)).done,e.value)})}}}(t),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:u.sent()},[3,11];case 6:if(u.trys.push([6,,9,10]),!(r&&!r.done&&(o=n.return)))return[3,8];return[4,o.call(n)];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})})(t,e).catch(function(t){return e.error(t)})})}function nh(t){return function(e){if(e$(null==e?void 0:e.lift))return e.lift(function(e){try{return t(e,this)}catch(t){this.error(t)}});throw TypeError("Unable to lift unknown Observable type")}}function np(t,e,n,r,i){return new nv(t,e,n,r,i)}var nv=function(t){function e(e,n,r,i,o,s){var u=t.call(this,e)||this;return u.onFinalize=o,u.shouldUnsubscribe=s,u._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,u._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,u}return E(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),n||null===(e=this.onFinalize)||void 0===e||e.call(this)}},e}(e4);function ng(t,e){return nh(function(n,r){var i=0;n.subscribe(np(r,function(n){r.next(t.call(e,n,i++))}))})}function ny(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function nm(t,e,n){return(void 0===n&&(n=1/0),e$(e))?nm(function(n,r){return ng(function(t,i){return e(n,t,r,i)})(nf(t(n,r)))},n):("number"==typeof e&&(n=e),nh(function(e,r){var i,o,s,u,a,c,l,f,d;return i=n,s=[],u=0,a=0,c=!1,l=function(){!c||s.length||u||r.complete()},f=function(t){return u<i?d(t):s.push(t)},d=function(e){u++;var n=!1;nf(t(e,a++)).subscribe(np(r,function(t){o?f(t):r.next(t)},function(){n=!0},void 0,function(){if(n)try{for(u--;s.length&&u<i;)!function(){var t=s.shift();d(t)}();l()}catch(t){r.error(t)}}))},e.subscribe(np(r,f,function(){c=!0,l()})),function(){}}))}var nb=Array.isArray,nw=["addListener","removeListener"],nE=["addEventListener","removeEventListener"],nI=["on","off"];function n_(t,e,n,r){if(e$(n)&&(r=n,n=void 0),r)return n_(t,e,n).pipe((i=r,ng(function(t){return nb(t)?i.apply(void 0,O([],k(t))):i(t)})));var i,o=k(e$(t.addEventListener)&&e$(t.removeEventListener)?nE.map(function(r){return function(i){return t[r](e,i,n)}}):e$(t.addListener)&&e$(t.removeListener)?nw.map(nS(t,e)):e$(t.on)&&e$(t.off)?nI.map(nS(t,e)):[],2),s=o[0],u=o[1];if(!s&&eF(t))return nm(function(t){return n_(t,e,n)})(nf(t));if(!s)throw TypeError("Invalid event target");return new nr(function(t){var e=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next(1<e.length?e:e[0])};return s(e),function(){return u(e)}})}function nS(t,e){return function(n){return function(r){return t[n](e,r)}}}function nT(t,e,n){for(var r=null,i=[],o=t,s=0;o&&"break"!==function(){var t,u,a,c,l=nU((t=o.getAttribute("id"))&&y.idName(t)?{name:"#"+CSS.escape(t),penalty:0}:null)||nU.apply(void 0,O([],k(Array.from(o.attributes).filter(function(t){return y.attr(t.name,t.value)}).map(function(t){return{name:"[".concat(CSS.escape(t.name),'="').concat(CSS.escape(t.value),'"]'),penalty:.5}})),!1))||nU.apply(void 0,O([],k(Array.from(o.classList).filter(y.className).map(function(t){return{name:"."+CSS.escape(t),penalty:1}})),!1))||nU((u=o.tagName.toLowerCase(),y.tagName(u)?{name:u,penalty:2}:null))||[nx()],f=function(t){var e=t.parentNode;if(!e)return null;var n=e.firstChild;if(!n)return null;for(var r=0;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==t);)n=n.nextSibling;return r}(o);if("all"==e)f&&(l=l.concat(l.filter(nR).map(function(t){return nC(t,f)})));else if("two"==e)l=l.slice(0,1),f&&(l=l.concat(l.filter(nR).map(function(t){return nC(t,f)})));else if("one"==e){var d=k(l=l.slice(0,1),1)[0];f&&nR(d)&&(l=[nC(d,f)])}else"none"==e&&(l=[nx()],f&&(l=[nC(l[0],f)]));try{for(var h=(a=void 0,A(l)),p=h.next();!p.done;p=h.next()){var d=p.value;d.level=s}}catch(t){a={error:t}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}if(i.push(l),i.length>=y.seedMinLength&&(r=nA(i,n)))return"break";o=o.parentElement,s++}(););return(r||(r=nA(i,n)),!r&&n)?n():r}function nA(t,e){if(t.reduce(function(t,e){return t*e.length},1)>y.threshold)return e?e():null;var n,r,i=nN(function t(e,n){var r,i,o,s,u;return void 0===n&&(n=[]),T(this,function(a){switch(a.label){case 0:if(!(e.length>0))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),i=(r=A(e[0])).next(),a.label=2;case 2:if(i.done)return[3,5];return o=i.value,[5,A(t(e.slice(1,e.length),n.concat(o)))];case 3:a.sent(),a.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s={error:a.sent()},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,n];case 10:a.sent(),a.label=11;case 11:return[2]}})}(t));try{for(var o=A(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(nP(u))return u}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function nk(t){for(var e=t[0],n=e.name,r=1;r<t.length;r++){var i=t[r].level||0;n=e.level===i-1?"".concat(t[r].name," > ").concat(n):"".concat(t[r].name," ").concat(n),e=t[r]}return n}function nO(t){return t.map(function(t){return t.penalty}).reduce(function(t,e){return t+e},0)}function nP(t){var e=nk(t);switch(m.querySelectorAll(e).length){case 0:throw Error("Can't select any node with this selector: ".concat(e));case 1:return!0;default:return!1}}function nx(){return{name:"*",penalty:3}}function nC(t,e){return{name:t.name+":nth-child(".concat(e,")"),penalty:t.penalty+1}}function nR(t){return"html"!==t.name&&!t.name.startsWith("#")}function nU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(nL);return n.length>0?n:null}function nL(t){return null!=t}function nN(t){return O([],k(t),!1).sort(function(t,e){return nO(t)-nO(e)})}var nB=["input","select","textarea"],nD=function(t,e){return function(n,r){var i,o,s,u=t.pageUrlAllowlist,a=t.shouldTrackEventResolver,c=null===(o=null===(i=null==r?void 0:r.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===o?void 0:o.call(i);if(!c)return!1;if(a)return a(n,r);if(!n$(window.location.href,u))return!1;var l=String(null==r?void 0:r.getAttribute("type"))||"";if("string"==typeof l)switch(l.toLowerCase()){case"hidden":case"password":return!1}if(e&&!e.some(function(t){var e;return!!(null===(e=null==r?void 0:r.matches)||void 0===e?void 0:e.call(r,t))}))return!1;switch(c){case"input":case"select":case"textarea":return"change"===n||"click"===n;default:var f=null===(s=null==window?void 0:window.getComputedStyle)||void 0===s?void 0:s.call(window,r);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===n)return!0;return"click"===n}}},nj=function(t){return!(null==t||"string"==typeof t&&(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(t)))},nM=function(t){var e,n,r,i=null===(n=null===(e=null==t?void 0:t.tagName)||void 0===e?void 0:e.toLowerCase)||void 0===n?void 0:n.call(e),o=t instanceof HTMLElement&&(null===(r=t.getAttribute("contenteditable"))||void 0===r?void 0:r.toLowerCase())==="true";return!nB.includes(i)&&!o},nq=function(t){var e="";return nM(t)&&t.childNodes&&t.childNodes.length&&t.childNodes.forEach(function(t){var n="";t&&3===t.nodeType?t.textContent&&(n=t.textContent):n=nq(t),e+=n.split(/(\s+)/).filter(nj).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}),e},nF=function(t,e){var n,r,i="";try{return i=function(t,e){if(t.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===t.tagName.toLowerCase())return"html";var n,r={root:document.body,idName:function(t){return!0},className:function(t){return!0},tagName:function(t){return!0},attr:function(t,e){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};m=(n=(y=I(I({},r),e)).root).nodeType===Node.DOCUMENT_NODE?n:n===r.root?n.ownerDocument:n;var i=nT(t,"all",function(){return nT(t,"two",function(){return nT(t,"one",function(){return nT(t,"none")})})});if(i){var o=nN(function t(e,n,r){var i,o,s;return void 0===r&&(r={counter:0,visited:new Map}),T(this,function(u){switch(u.label){case 0:if(!(e.length>2&&e.length>y.optimizedMinLength))return[3,5];i=1,u.label=1;case 1:var a;if(!(i<e.length-1))return[3,5];if(r.counter>y.maxNumberOfTries||(r.counter+=1,(o=O([],k(e),!1)).splice(i,1),s=nk(o),r.visited.has(s)))return[2];if(!(nP(o)&&(a=o,m.querySelector(nk(a))===n)))return[3,4];return[4,o];case 2:return u.sent(),r.visited.set(s,!0),[5,A(t(o,n,r))];case 3:u.sent(),u.label=4;case 4:return i++,[3,1];case 5:return[2]}})}(i,t));return o.length>0&&(i=o[0]),nk(i)}throw Error("Selector was not found.")}(t,{className:function(t){return t!==eq},maxNumberOfTries:1e3})}catch(t){e&&e.warn("Failed to get selector with finder, use fallback strategy instead: ".concat(t.toString()))}var o=null===(r=null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.toLowerCase)||void 0===r?void 0:r.call(n);o&&(i=o);var s=t.getAttribute("id"),u=t.getAttribute("class");if(s)i="#".concat(s);else if(u){var a=u.split(" ").filter(function(t){return t!==eq}).join(".");a&&(i="".concat(i,".").concat(a))}return i},n$=function(t,e){return!e||!e.length||e.some(function(e){return"string"==typeof e?t===e:t.match(e)})},nV=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null==r||"object"==typeof r&&0===Object.keys(r).length||"string"==typeof r&&0===r.trim().length||(e[n]=r),e},{})},nz=function(t){var e,n=t.parentElement;if(!n)return"";try{e=n.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch(t){e=null}if(e){var r=e.textContent||"";return nj(r)?r:""}return nz(n)},nK=function(t,e){return t?e.some(function(e){var n;return null===(n=null==t?void 0:t.matches)||void 0===n?void 0:n.call(t,e)})?t:nK(null==t?void 0:t.parentElement,e):null},nY=function(t,e){if(!t)return{};var n,r,i,o=null===(i=null===(r=null==t?void 0:t.tagName)||void 0===r?void 0:r.toLowerCase)||void 0===i?void 0:i.call(r),s=nF(t,e);return nV(((n={})[eL]=o,n[eN]=nq(t),n[eB]=s,n[eD]=window.location.href.split("?")[0],n))},nJ=function(t){return null!==t.event.target&&!!t.closestTrackedAncestor},nW=function(){function t(t){var e=(void 0===t?{}:t).origin,n=this;this.endpoint=ej,this.requestCallbacks={},this.onSelect=function(t){n.notify({action:"element-selected",data:t})},this.onTrack=function(t,e){"selector-mode-changed"===t?n.notify({action:"track-selector-mode-changed",data:e}):"selector-moved"===t&&n.notify({action:"track-selector-moved",data:e})},this.endpoint=void 0===e?ej:e}return t.prototype.notify=function(t){var e,n,r,i;null===(n=null===(e=this.logger)||void 0===e?void 0:e.debug)||void 0===n||n.call(e,"Message sent: ",JSON.stringify(t)),null===(i=null===(r=window.opener)||void 0===r?void 0:r.postMessage)||void 0===i||i.call(r,t,this.endpoint)},t.prototype.sendRequest=function(t,e,n){var r=this;void 0===n&&(n={timeout:15e3});var i="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:i,action:t,args:e};return new Promise(function(e,s){r.requestCallbacks[i]={resolve:e,reject:s},r.notify(o),(null==n?void 0:n.timeout)>0&&setTimeout(function(){s(Error("".concat(t," timed out (id: ").concat(i,")"))),delete r.requestCallbacks[i]},n.timeout)})},t.prototype.handleResponse=function(t){var e;if(!this.requestCallbacks[t.id]){null===(e=this.logger)||void 0===e||e.warn("No callback found for request id: ".concat(t.id));return}this.requestCallbacks[t.id].resolve(t.responseData),delete this.requestCallbacks[t.id]},t.prototype.setup=function(t){var e=this,n=void 0===t?{}:t,r=n.logger,i=n.endpoint,o=n.isElementSelectable,s=n.cssSelectorAllowlist,u=n.actionClickAllowlist;this.logger=r,i&&this.endpoint===ej&&(this.endpoint=i);var a=null;window.addEventListener("message",function(t){if(null===(r=null===(n=e.logger)||void 0===n?void 0:n.debug)||void 0===r||r.call(n,"Message received: ",JSON.stringify(t)),e.endpoint===t.origin){var n,r,i,c,l,f=null==t?void 0:t.data,d=null==f?void 0:f.action;if(d){if("id"in f)null===(c=null===(i=e.logger)||void 0===i?void 0:i.debug)||void 0===c||c.call(i,"Received Response to previous request: ",JSON.stringify(t)),e.handleResponse(f);else if("ping"===d)e.notify({action:"pong"});else if("initialize-visual-tagging-selector"===d){var h,p=null==f?void 0:f.data;(h="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",new Promise(function(t,e){var n;try{var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=h,r.addEventListener("load",function(){t({status:!0})},{once:!0}),r.addEventListener("error",function(){e({status:!1,message:"Failed to load the script ".concat(h)})}),null===(n=document.head)||void 0===n||n.appendChild(r)}catch(t){e(t)}})).then(function(){var t;a=null===(t=null==window?void 0:window.amplitudeVisualTaggingSelector)||void 0===t?void 0:t.call(window,{getEventTagProps:nY,isElementSelectable:function(t){return!o||o((null==p?void 0:p.actionType)||"click",t)},onTrack:e.onTrack,onSelect:e.onSelect,visualHighlightClass:eq,messenger:e,cssSelectorAllowlist:s,actionClickAllowlist:u}),e.notify({action:"selector-loaded"})}).catch(function(){var t;null===(t=e.logger)||void 0===t||t.warn("Failed to initialize visual tagging selector")})}else"close-visual-tagging-selector"===d&&(null===(l=null==a?void 0:a.close)||void 0===l||l.call(a))}}}),this.notify({action:"page-loaded"})},t}(),nQ=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],nH=["type"],nG=["svg","path","g"],nZ=["password","hidden"];function nX(t,e){return nh(function(n,r){var i=0;n.subscribe(np(r,function(n){return t.call(e,n,i++)&&r.next(n)}))})}var n0=function(t){function e(e,n){return t.call(this)||this}return E(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(eJ),n1={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n1.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,O([t,e],k(n))):setInterval.apply(void 0,O([t,e],k(n)))},clearInterval:function(t){var e=n1.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},n2=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return E(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n,r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),n1.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&n1.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,eY(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(n0),n4={now:function(){return(n4.delegate||Date).now()},delegate:void 0},n3=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=n4.now,t}(),n6=new(function(t){function e(e,n){void 0===n&&(n=n3.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r}return E(e,t),e.prototype.flush=function(t){var e,n=this.actions;if(this._active){n.push(t);return}this._active=!0;do if(e=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,e){for(;t=n.shift();)t.unsubscribe();throw e}},e}(n3))(n2);function n5(t){return void 0===t&&(t=1/0),nm(nn,t)}var n8=new nr(function(t){return t.complete()});function n7(t){return t&&e$(t.schedule)}function n9(t){return t[t.length-1]}function rt(t){return n7(n9(t))?t.pop():void 0}function re(t,e){return void 0===e&&(e=0),nh(function(n,r){n.subscribe(np(r,function(n){return ny(r,t,function(){return r.next(n)},e)},function(){return ny(r,t,function(){return r.complete()},e)},function(n){return ny(r,t,function(){return r.error(n)},e)}))})}function rn(t,e){return void 0===e&&(e=0),nh(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function rr(t,e){if(!t)throw Error("Iterable cannot be null");return new nr(function(n){ny(n,e,function(){var r=t[Symbol.asyncIterator]();ny(n,e,function(){r.next().then(function(t){t.done?n.complete():n.next(t.value)})},0,!0)})})}function ri(t,e){return e?function(t,e){if(null!=t){if(e$(t[ne]))return nf(t).pipe(rn(e),re(e));if(eF(t))return new nr(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})});if(eV(t))return nf(t).pipe(rn(e),re(e));if(no(t))return rr(t,e);if(na(t))return new nr(function(n){var r;return ny(n,e,function(){r=t[nu](),ny(n,e,function(){var t,e,i;try{e=(t=r.next()).value,i=t.done}catch(t){n.error(t);return}i?n.complete():n.next(e)},0,!0)}),function(){return e$(null==r?void 0:r.return)&&r.return()}});if(nl(t))return rr(nc(t),e)}throw ns(t)}(t,e):nf(t)}function ro(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rt(e),i=(t=1/0,"number"==typeof n9(e)?e.pop():t);return e.length?1===e.length?nf(e[0]):n5(i)(ri(e,r)):n8}function rs(t){return t<=0?function(){return n8}:nh(function(e,n){var r=0;e.subscribe(np(n,function(e){++r<=t&&(n.next(e),t<=r&&n.complete())}))})}function ru(t){return t instanceof Date&&!isNaN(t)}var ra=ez(function(t){return function(e){void 0===e&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function rc(t){throw new ra(t)}(c=b||(b={})).ClickObservable="clickObservable",c.ChangeObservable="changeObservable",c.NavigateObservable="navigateObservable",c.MutationObservable="mutationObservable";var rl=function(t){void 0===t&&(t={});var e,n,r,i=t.dataAttributePrefix,o=void 0===i?"data-amp-track-":i,s=t.visualTaggingOptions,u=void 0===s?{enabled:!0,messenger:new nW}:s;t.cssSelectorAllowlist=null!==(e=t.cssSelectorAllowlist)&&void 0!==e?e:eC,t.actionClickAllowlist=null!==(n=t.actionClickAllowlist)&&void 0!==n?n:eR,t.debounceTime=null!==(r=t.debounceTime)&&void 0!==r?r:0;var a="@amplitude/plugin-autocapture-browser",c=[],l=void 0,f=function(){var t,e,n=n_(document,"click",{capture:!0}).pipe(ng(function(t){return h(t,"click")})),r=n_(document,"change",{capture:!0}).pipe(ng(function(t){return h(t,"change")}));window.navigation&&(e=n_(window.navigation,"navigate").pipe(ng(function(t){return h(t,"navigate")})));var i=new nr(function(t){var e=new MutationObserver(function(e){t.next(e)});return e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}}).pipe(ng(function(t){return h(t,"mutation")}));return(t={})[b.ClickObservable]=n,t[b.ChangeObservable]=r,t[b.NavigateObservable]=e,t[b.MutationObservable]=i,t},d=function(t,e){var n,r,i,s,u=null===(s=null===(i=null==e?void 0:e.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===s?void 0:s.call(i),a="function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{left:null,top:null},c=e.getAttribute("aria-label"),f=e.getAttributeNames().reduce(function(t,n){if(n.startsWith(o)){var r=n.replace(o,""),i=e.getAttribute(n);r&&(t[r]=i||"")}return t},{}),d=nz(e),h=nF(e,l),p=((r={})["[Amplitude] Element ID"]=e.getAttribute("id")||"",r["[Amplitude] Element Class"]=e.getAttribute("class"),r["[Amplitude] Element Hierarchy"]=(n=e)?function(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(null===i)n+=4;else{var o=function t(e,n){void 0===n&&(n=!1);try{if(null==e){if(n)return"None";return null}if("string"==typeof e){if(n){if((e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")).includes('"'))return"'".concat(e,"'");if(e.includes("'"))return'"'.concat(e.replace(/'/g,"\\'"),'"');return"'".concat(e,"'")}return e}if("boolean"==typeof e)return e?"True":"False";if(Array.isArray(e)){var r=e.map(function(e){return t(e,!0)});return"[".concat(r.join(", "),"]")}else if("object"==typeof e){var i=Object.entries(e).filter(function(t){var e=k(t,1)[0];return null!=e}).map(function(e){var n=k(e,2),r=n[0],i=n[1];return"".concat(String(t(r,!0)),": ").concat(String(t(i,!0)))}),o="{".concat(i.join(", "),"}");return o.includes("\\'")&&(o=o.replace(/'/g,"'").replace(/'/g,"\\'")),o}return e.toString()}catch(t){return null}}(i);n+=o?Array.from(o).length:4}if(n>1024)return t.slice(0,r)}return t}((function(t){var e=[];if(!t)return e;e.push(t);for(var n=t.parentElement;n&&"HTML"!==n.tagName;)e.push(n),n=n.parentElement;return e})(n).map(function(t){return function(t){if(null===t)return null;var e,n,r,i,o,s,u=String(t.tagName).toLowerCase(),a={tag:u},c=Array.from(null!==(i=null===(r=t.parentElement)||void 0===r?void 0:r.children)&&void 0!==i?i:[]);c.length&&(a.index=c.indexOf(t),a.indexOfType=c.filter(function(e){return e.tagName===t.tagName}).indexOf(t));var l=null===(s=null===(o=t.previousElementSibling)||void 0===o?void 0:o.tagName)||void 0===s?void 0:s.toLowerCase();l&&(a.prevSib=String(l));var f=t.getAttribute("id");f&&(a.id=String(f));var d=Array.from(t.classList);d.length&&(a.classes=d);var h={},p=Array.from(t.attributes).filter(function(t){return!nQ.includes(t.name)}),v=!nM(t);if(!nZ.includes(String(t.getAttribute("type")))&&!nG.includes(u))try{for(var g=A(p),y=g.next();!y.done;y=g.next()){var m=y.value;(!v||nH.includes(m.name))&&(h[m.name]=String(m.value).substring(0,128))}}catch(t){e={error:t}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}return Object.keys(h).length&&(a.attrs=h),a}(t)}),0):[],r[eL]=u,r[eN]=nq(e),r["[Amplitude] Element Position Left"]=null==a.left?null:Math.round(a.left),r["[Amplitude] Element Position Top"]=null==a.top?null:Math.round(a.top),r["[Amplitude] Element Aria Label"]=c,r["[Amplitude] Element Attributes"]=f,r[eB]=h,r["[Amplitude] Element Parent Label"]=d,r[eD]=window.location.href.split("?")[0],r["[Amplitude] Page Title"]="undefined"!=typeof document&&document.title||"",r["[Amplitude] Viewport Height"]=window.innerHeight,r["[Amplitude] Viewport Width"]=window.innerWidth,r);return"a"===u&&"click"===t&&e instanceof HTMLAnchorElement&&(p["[Amplitude] Element Href"]=e.href),nV(p)},h=function(e,n){var r={event:e,timestamp:Date.now(),type:n};if(("click"===r.type||"change"===r.type)&&null!==r.event.target){var i=nK(r.event.target,t.cssSelectorAllowlist);i&&(r.closestTrackedAncestor=i,r.targetElementProperties=d(r.type,i))}return r};return{name:a,type:"enrichment",setup:function(e,n){return S(void 0,void 0,void 0,function(){var r,i,o,s,h,p,v,g,y,m;return T(this,function(b){var w,E,_,S,T,P,x,C,R,U,L,N,B,D,j,M,q,F,$,V,z,K,Y,J,W,Q,H,G,Z,X,tt,te,tn,tr;return l=e.loggerProvider,"undefined"==typeof document||(r=nD(t,t.cssSelectorAllowlist),i=nD(t,t.actionClickAllowlist),E=(w={allObservables:o=f(),options:t,amplitude:n,shouldTrackEvent:r}).amplitude,_=w.allObservables,S=w.options,T=w.shouldTrackEvent,R=ro((P=_.clickObservable).pipe(nh(function(t,e){var n,r=!1;t.subscribe(np(e,function(t){var i=n;n=t,r&&e.next([i,t]),r=!0}))}),nX(function(t){var e=k(t,2),n=e[0],r=e[1],i=n.event.target!==r.event.target,o=20>=Math.abs(r.event.screenX-n.event.screenX)&&20>=Math.abs(r.event.screenY-n.event.screenY);return i&&!o})),P.pipe((x=S.debounceTime,void 0===C&&(C=n6),nh(function(t,e){var n=null,r=null,i=null,o=function(){if(n){n.unsubscribe(),n=null;var t=r;r=null,e.next(t)}};function s(){var t=i+x,r=C.now();if(r<t){n=this.schedule(void 0,t-r),e.add(n);return}o()}t.subscribe(np(e,function(t){r=t,i=C.now(),n||(n=C.schedule(s,x),e.add(n))},function(){o(),e.complete()},void 0,function(){r=n=null}))})),ng(function(){return"timeout"}))),s=P.pipe((void 0===U&&(U=n6),L=0,N=U,void 0===L&&(L=0),void 0===B&&(B=n6),D=-1,null!=N&&(n7(N)?B=N:D=N),j=new nr(function(t){var e=ru(L)?+L-B.now():L;e<0&&(e=0);var n=0;return B.schedule(function(){t.closed||(t.next(n++),0<=D?this.schedule(void 0,D):t.complete())},e)}),function t(e,n){return n?function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n5(1)(ri(t,rt(t)))}(n.pipe(rs(1),nh(function(t,e){t.subscribe(np(e,eX))})),r.pipe(t(e)))}:nm(function(t,n){return nf(e(t,n)).pipe(rs(1),ng(function(){return t}))})}(function(){return j})),nX(nJ),nX(function(t){return T("click",t.closestTrackedAncestor)}),nh(function(t,e){var n=[];return t.subscribe(np(e,function(t){return n.push(t)},function(){e.next(n),e.complete()})),nf(R).subscribe(np(e,function(){var t=n;n=[],e.next(t)},eX)),function(){n=null}})).subscribe(function(t){var e,n,r=(t.length,eU);try{for(var i=A(t),o=i.next();!o.done;o=i.next()){var s=o.value;null==E||E.track(r,s.targetElementProperties,{time:s.timestamp})}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}),c.push(s),q=(M={allObservables:o,getEventProperties:d,amplitude:n,shouldTrackEvent:r}).amplitude,F=M.allObservables,$=M.getEventProperties,V=M.shouldTrackEvent,h=F.changeObservable.pipe(nX(nJ),nX(function(t){return V("change",t.closestTrackedAncestor)})).subscribe(function(t){null==q||q.track("[Amplitude] Element Changed",$("change",t.closestTrackedAncestor))}),c.push(h),K=(z={allObservables:o,options:t,getEventProperties:d,amplitude:n,shouldTrackEvent:r,shouldTrackActionClick:i}).amplitude,Y=z.allObservables,J=z.options,W=z.getEventProperties,Q=z.shouldTrackEvent,H=z.shouldTrackActionClick,G=Y.clickObservable,Z=Y.mutationObservable,X=Y.navigateObservable,tt=G.pipe(nX(function(t){return!Q("click",t.closestTrackedAncestor)}),ng(function(t){var e=nK(t.event.target,J.actionClickAllowlist);return t.closestTrackedAncestor=e,null!==t.closestTrackedAncestor&&(t.targetElementProperties=W(t.type,t.closestTrackedAncestor)),t}),nX(nJ),nX(function(t){return H("click",t.closestTrackedAncestor)})),te=[Z],X&&te.push(X),tn=ro.apply(void 0,O([],k(te),!1)),p=tt.pipe((tr=function(t){return tn.pipe(rs(1),function(t,e){var n=ru(t)?{first:t}:"number"==typeof t?{each:t}:t,r=n.first,i=n.each,o=n.with,s=void 0===o?rc:o,u=n.scheduler,a=void 0===u?n6:u,c=n.meta,l=void 0===c?null:c;if(null==r&&null==i)throw TypeError("No timeout provided.");return nh(function(t,e){var n,o,u=null,c=0,f=function(t){o=ny(e,a,function(){try{n.unsubscribe(),nf(s({meta:l,lastValue:u,seen:c})).subscribe(e)}catch(t){e.error(t)}},t)};n=t.subscribe(np(e,function(t){null==o||o.unsubscribe(),c++,e.next(u=t),i>0&&f(i)},void 0,void 0,function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),u=null})),c||f(null!=r?"number"==typeof r?r:+r-a.now():i)})}({first:500,with:function(){return n8}}),ng(function(){return t}))},nh(function(t,e){var n=null,r=0,i=!1,o=function(){return i&&!n&&e.complete()};t.subscribe(np(e,function(t){null==n||n.unsubscribe(),nf(tr(t,r++)).subscribe(n=np(e,function(t){return e.next(t)},function(){n=null,o()}))},function(){i=!0,o()}))}))).subscribe(function(t){null==K||K.track(eU,W("click",t.closestTrackedAncestor),{time:t.timestamp})}),c.push(p),null===(y=null==e?void 0:e.loggerProvider)||void 0===y||y.log("".concat(a," has been successfully added.")),window.opener&&u.enabled&&(v=t.cssSelectorAllowlist,g=t.actionClickAllowlist,null===(m=u.messenger)||void 0===m||m.setup(I(I({logger:null==e?void 0:e.loggerProvider},(null==e?void 0:e.serverZone)&&{endpoint:eM[e.serverZone]}),{isElementSelectable:nD(t,O(O([],k(v),!1),k(g),!1)),cssSelectorAllowlist:v,actionClickAllowlist:g})))),[2]})})},execute:function(t){return S(void 0,void 0,void 0,function(){return T(this,function(e){return[2,t]})})},teardown:function(){return S(void 0,void 0,void 0,function(){var t,e,n,r;return T(this,function(i){try{for(e=(t=A(c)).next();!e.done;e=t.next())e.value.unsubscribe()}catch(t){n={error:t}}finally{try{e&&!e.done&&(r=t.return)&&r.call(t)}finally{if(n)throw n.error}}return[2]})})}}},rf={init:U((l=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.init=function(t,e,n){var r,i;return void 0===t&&(t=""),arguments.length>2?(r=e,i=n):"string"==typeof e?(r=e,i=void 0):(r=null==e?void 0:e.userId,i=e),L(this._init(I(I({},i),{userId:r,apiKey:t})))},e.prototype._init=function(e){var n,r,i;return S(this,void 0,void 0,function(){var o,s,u,a,c,l=this;return T(this,function(f){var d,h,p,v,g;switch(f.label){case 0:if(this.initializing)return[2];return this.initializing=!0,[4,(d=e.apiKey,h=e,p=this,void 0===h&&(h={}),S(void 0,void 0,void 0,function(){var t,e,n,r,i,o,s,u,a,c,l,f,v,g,y,m,b,w,E,_,A,O,P,x,C,R,U,L,N,B,D,j,M,q,F,$,V,z,Y,J,W,Q,H;return T(this,function(G){var Z,X,tt;switch(G.label){case 0:if(t=h.identityStorage||ed,E={},!(t!==ed))return[3,1];return n="",[3,5];case 1:if(!(null!==(A=null===(_=h.cookieOptions)||void 0===_?void 0:_.domain)&&void 0!==A))return[3,2];return r=A,[3,4];case 2:return[4,S(void 0,void 0,void 0,function(){var t,e,n,r,i,o;return T(this,function(s){switch(s.label){case 0:return[4,new tH().isEnabled()];case 1:if(!s.sent()||"undefined"==typeof location||!location.hostname)return[2,""];for(t=(null!=Z?Z:location.hostname).split("."),e=[],n="AMP_TLDTEST",r=t.length-2;r>=0;--r)e.push(t.slice(r).join("."));r=0,s.label=2;case 2:if(!(r<e.length))return[3,7];return[4,(o=new tH({domain:"."+(i=e[r])})).set(n,1)];case 3:return s.sent(),[4,o.get(n)];case 4:if(!s.sent())return[3,6];return[4,o.remove(n)];case 5:return s.sent(),[2,"."+i];case 6:return r++,[3,2];case 7:return[2,""]}})})];case 3:r=G.sent(),G.label=4;case 4:n=r,G.label=5;case 5:return e=I.apply(void 0,[(E.domain=n,E.expiration=365,E.sameSite="Lax",E.secure=!1,E.upgrade=!0,E),h.cookieOptions]),[4,(X=i=ep(h.identityStorage,e),void 0===(tt=null===(P=null===(O=h.cookieOptions)||void 0===O?void 0:O.upgrade)||void 0===P||P)&&(tt=!0),S(void 0,void 0,void 0,function(){var t,e,n,r,i,o,s,u,a;return T(this,function(c){switch(c.label){case 0:return t="".concat("amp","_").concat(d.substring(0,6)),[4,X.getRaw(t)];case 1:if(!(e=c.sent()))return[2,{optOut:!1}];if(!tt)return[3,3];return[4,X.remove(t)];case 2:c.sent(),c.label=3;case 3:return r=(n=k(e.split("."),6))[0],i=n[1],o=n[2],s=n[3],u=n[4],a=n[5],[2,{deviceId:r,userId:t8(i),sessionId:t5(s),lastEventId:t5(a),lastEventTime:t5(u),optOut:!!o}]}})}))];case 6:return o=G.sent(),[4,i.get(tQ(d))];case 7:return s=G.sent(),u=tk(),a=null!==(L=null!==(U=null!==(R=null!==(C=null!==(x=h.deviceId)&&void 0!==x?x:u.ampDeviceId)&&void 0!==C?C:u.deviceId)&&void 0!==R?R:null==s?void 0:s.deviceId)&&void 0!==U?U:o.deviceId)&&void 0!==L?L:K(),c=null!==(N=null==s?void 0:s.lastEventId)&&void 0!==N?N:o.lastEventId,l=null!==(B=null==s?void 0:s.lastEventTime)&&void 0!==B?B:o.lastEventTime,f=null!==(j=null!==(D=h.optOut)&&void 0!==D?D:null==s?void 0:s.optOut)&&void 0!==j?j:o.optOut,v=null!==(M=null==s?void 0:s.sessionId)&&void 0!==M?M:o.sessionId,g=null!==(F=null!==(q=h.userId)&&void 0!==q?q:null==s?void 0:s.userId)&&void 0!==F?F:o.userId,p.previousSessionDeviceId=null!==($=null==s?void 0:s.deviceId)&&void 0!==$?$:o.deviceId,p.previousSessionUserId=null!==(V=null==s?void 0:s.userId)&&void 0!==V?V:o.userId,y={ipAddress:null===(Y=null===(z=h.trackingOptions)||void 0===z?void 0:z.ipAddress)||void 0===Y||Y,language:null===(W=null===(J=h.trackingOptions)||void 0===J?void 0:J.language)||void 0===W||W,platform:null===(H=null===(Q=h.trackingOptions)||void 0===Q?void 0:Q.platform)||void 0===H||H},m=null==s?void 0:s.pageCounter,b=null==s?void 0:s.debugLogsEnabled,void 0!==h.autocapture&&(h.defaultTracking=h.autocapture),[4,(w=new eh(d,h.appVersion,i,e,h.defaultTracking,h.autocapture,a,h.flushIntervalMillis,h.flushMaxRetries,h.flushQueueSize,t,h.ingestionMetadata,h.instanceName,c,l,h.loggerProvider,h.logLevel,h.minIdLength,h.offline,f,h.partnerId,h.plan,h.serverUrl,h.serverZone,v,h.sessionTimeout,h.storageProvider,y,h.transport,h.useBatch,h.fetchRemoteConfig,g,m,b)).storageProvider.isEnabled()];case 8:return G.sent()||(w.loggerProvider.warn("Storage provider ".concat(w.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),w.storageProvider=new tW),[2,w]}})}))];case 1:if(o=f.sent(),!e.fetchRemoteConfig)return[3,4];return[4,(v=o,S(void 0,void 0,void 0,function(){var t;return T(this,function(e){switch(e.label){case 0:return[4,(t=new ex(v)).initialize()];case 1:return e.sent(),[2,t]}})}))];case 2:return[4,f.sent().generateJoinedConfig()];case 3:o=f.sent(),f.label=4;case 4:return[4,t.prototype._init.call(this,o)];case 5:if(f.sent(),this.logBrowserOptions(o),!ti(this.config.defaultTracking))return[3,7];return s=ti((g=this.config).defaultTracking)&&g.defaultTracking&&"object"==typeof g.defaultTracking&&g.defaultTracking.attribution&&"object"==typeof g.defaultTracking.attribution?I({},g.defaultTracking.attribution):{},this.webAttribution=new tC(s,this.config),[4,this.webAttribution.init()];case 6:f.sent(),f.label=7;case 7:if(a=Number.isNaN(Number((u=tk()).ampSessionId))?void 0:Number(u.ampSessionId),this.setSessionId(null!==(i=null!==(r=null!==(n=e.sessionId)&&void 0!==n?n:a)&&void 0!==r?r:this.config.sessionId)&&void 0!==i?i:Date.now()),(c=tq(e.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),!(null!==this.config.offline))return[3,9];return[4,this.add(eA()).promise];case 8:f.sent(),f.label=9;case 9:return[4,this.add(new J).promise];case 10:return f.sent(),[4,this.add(new tJ).promise];case 11:return f.sent(),[4,this.add(new tV).promise];case 12:if(f.sent(),eT(this.config),!tr(this.config.defaultTracking,"fileDownloads"))return[3,14];return this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(e_()).promise];case 13:f.sent(),f.label=14;case 14:if(!tr(this.config.defaultTracking,"formInteractions"))return[3,16];return this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(eE()).promise];case 15:f.sent(),f.label=16;case 16:if(!to(this.config.defaultTracking))return[3,18];return this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(ey(tc(this.config))).promise];case 17:f.sent(),f.label=18;case 18:if(!tu(this.config.autocapture))return[3,20];return this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(rl(ta(this.config))).promise];case 19:f.sent(),f.label=20;case 20:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 21:return f.sent(),c.eventBridge.setEventReceiver(function(t){l.track(t.eventType,t.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.userId},e.prototype.setUserId=function(t){if(!this.config){this.q.push(this.setUserId.bind(this,t));return}this.config.loggerProvider.debug("function setUserId: ",t),(t!==this.config.userId||void 0===t)&&(this.config.userId=t,tF(t,this.config.instanceName))},e.prototype.getDeviceId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.deviceId},e.prototype.setDeviceId=function(t){if(!this.config){this.q.push(this.setDeviceId.bind(this,t));return}this.config.loggerProvider.debug("function setDeviceId: ",t),this.config.deviceId=t,t$(t,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(K()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.sessionId},e.prototype.setSessionId=function(t){var e,n=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,t)),L(Promise.resolve());if(t===this.config.sessionId)return L(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",t);var r=this.getSessionId(),i=this.config.lastEventTime,o=null!==(e=this.config.lastEventId)&&void 0!==e?e:-1;this.config.sessionId=t,this.config.lastEventTime=void 0,this.config.pageCounter=0,ts(this.config.defaultTracking)&&(r&&i&&n.push(this.track(er,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:r,time:i+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var s=this.trackCampaignEventIfNeeded(++o,n);return ts(this.config.defaultTracking)&&n.push(this.track(en,void 0,{event_id:s?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,L(Promise.all(n))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(t){if(!this.config){this.q.push(this.setTransport.bind(this,t));return}this.config.transportProvider=ev(t)},e.prototype.identify=function(e,n){if(tK(e)){var r=e._q;e._q=[],e=tz(new H,r)}return(null==n?void 0:n.user_id)&&this.setUserId(n.user_id),(null==n?void 0:n.device_id)&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,e,n)},e.prototype.groupIdentify=function(e,n,r,i){if(tK(r)){var o=r._q;r._q=[],r=tz(new H,o)}return t.prototype.groupIdentify.call(this,e,n,r,i)},e.prototype.revenue=function(e,n){if(tK(e)){var r=e._q;e._q=[],e=tz(new G,r)}return t.prototype.revenue.call(this,e,n)},e.prototype.trackCampaignEventIfNeeded=function(t,e){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var n=this.webAttribution.generateCampaignEvent(t);return e?e.push(this.track(n).promise):this.track(n),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(e){return S(this,void 0,void 0,function(){var n,r,i;return T(this,function(o){return n=Date.now(),r=tx(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),e.event_type===en||e.event_type===er||e.session_id&&e.session_id!==this.getSessionId()||(r||i?(this.setSessionId(n),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):r||this.trackCampaignEventIfNeeded()),[2,t.prototype.process.call(this,e)]})})},e.prototype.logBrowserOptions=function(t){try{var e=I(I({},t),{apiKey:t.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(e))}catch(t){this.config.loggerProvider.error("Error logging browser config",t)}},e}(tn))).init.bind(l),"init",x(l),R(l,["config"])),add:U(l.add.bind(l),"add",x(l),R(l,["config.apiKey","timeline.plugins"])),remove:U(l.remove.bind(l),"remove",x(l),R(l,["config.apiKey","timeline.plugins"])),track:U(l.track.bind(l),"track",x(l),R(l,["config.apiKey","timeline.queue.length"])),logEvent:U(l.logEvent.bind(l),"logEvent",x(l),R(l,["config.apiKey","timeline.queue.length"])),identify:U(l.identify.bind(l),"identify",x(l),R(l,["config.apiKey","timeline.queue.length"])),groupIdentify:U(l.groupIdentify.bind(l),"groupIdentify",x(l),R(l,["config.apiKey","timeline.queue.length"])),setGroup:U(l.setGroup.bind(l),"setGroup",x(l),R(l,["config.apiKey","timeline.queue.length"])),revenue:U(l.revenue.bind(l),"revenue",x(l),R(l,["config.apiKey","timeline.queue.length"])),flush:U(l.flush.bind(l),"flush",x(l),R(l,["config.apiKey","timeline.queue.length"])),getUserId:U(l.getUserId.bind(l),"getUserId",x(l),R(l,["config","config.userId"])),setUserId:U(l.setUserId.bind(l),"setUserId",x(l),R(l,["config","config.userId"])),getDeviceId:U(l.getDeviceId.bind(l),"getDeviceId",x(l),R(l,["config","config.deviceId"])),setDeviceId:U(l.setDeviceId.bind(l),"setDeviceId",x(l),R(l,["config","config.deviceId"])),reset:U(l.reset.bind(l),"reset",x(l),R(l,["config","config.userId","config.deviceId"])),getSessionId:U(l.getSessionId.bind(l),"getSessionId",x(l),R(l,["config"])),setSessionId:U(l.setSessionId.bind(l),"setSessionId",x(l),R(l,["config"])),extendSession:U(l.extendSession.bind(l),"extendSession",x(l),R(l,["config"])),setOptOut:U(l.setOptOut.bind(l),"setOptOut",x(l),R(l,["config"])),setTransport:U(l.setTransport.bind(l),"setTransport",x(l),R(l,["config"]))};rf.add,rf.extendSession,rf.flush,rf.getDeviceId,rf.getSessionId,rf.getUserId,rf.groupIdentify,rf.identify;var rd=rf.init,rh=rf.logEvent,rp=(rf.remove,rf.reset,rf.revenue,rf.setDeviceId,rf.setGroup,rf.setOptOut,rf.setSessionId,rf.setTransport,rf.setUserId,rf.track)},48738:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return(n+r)*3/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],u=o[1],c=new i((s+u)*3/4-u),l=0,f=u>0?s-4:s;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===u&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===u&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,u=r-i;s<u;s+=16383)o.push(function(t,e,r){for(var i,o=[],s=e;s<r;s+=3)o.push(n[(i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(t,s,s+16383>u?u:s+16383));return 1===i?o.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&o.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9109:function(t,e,n){"use strict";let r=n(48738),i=n(6868),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!u.isEncoding(e))throw TypeError("Unknown encoding: "+e);let n=0|p(t,e),r=s(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(D(t,Uint8Array)){let e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(t,SharedArrayBuffer)||t&&D(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);let i=function(t){var e;if(u.isBuffer(t)){let e=0|h(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?s(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),s(t<0?0:0|h(t))}function f(t){let e=t.length<0?0:0|h(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){let r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),u.prototype),r}function h(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(t).length;default:if(i)return r?-1:L(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=j[t[r]];return i}(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":var o,s;return o=e,s=n,0===o&&s===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){let r=t.slice(e,n),i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}(this,e,n);default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){var o;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(o=n=+n)!=o&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){let o,s=1,u=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;s=2,u/=2,a/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<u;o++)if(c(t,o)===c(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===a)return r*s}else -1!==r&&(o-=o-r),r=-1}else for(n+a>u&&(n=u-a),o=n;o>=0;o--){let n=!0;for(let r=0;r<a;r++)if(c(t,o+r)!==c(e,r)){n=!1;break}if(n)return o}return -1}function b(t,e,n){n=Math.min(t.length,n);let r=[],i=e;for(;i<n;){let e=t[i],o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,u,a;switch(s){case 1:e<128&&(o=e);break;case 2:(192&(n=t[i+1]))==128&&(a=(31&e)<<6|63&n)>127&&(o=a);break;case 3:n=t[i+1],r=t[i+2],(192&n)==128&&(192&r)==128&&(a=(15&e)<<12|(63&n)<<6|63&r)>2047&&(a<55296||a>57343)&&(o=a);break;case 4:n=t[i+1],r=t[i+2],u=t[i+3],(192&n)==128&&(192&r)==128&&(192&u)==128&&(a=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&u)>65535&&a<1114112&&(o=a)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function w(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function E(t,e,n,r,i,o){if(!u.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function I(t,e,n,r,i){x(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function _(t,e,n,r,i){x(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function S(t,e,n,r,i,o){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function T(t,e,n,r,o){return e=+e,n>>>=0,o||S(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function A(t,e,n,r,o){return e=+e,n>>>=0,o||S(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,u.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return(c(t),t<=0)?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(D(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),D(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){let n;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;let r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){let e=t[n];if(D(e,Uint8Array))i+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else if(u.isBuffer(e))e.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=e.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(D(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;let o=i-r,s=n-e,a=Math.min(o,s),c=this.slice(r,i),l=t.slice(e,n);for(let t=0;t<a;++t)if(c[t]!==l[t]){o=c[t],s=l[t];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){var i,o,s,u,a,c,l,f;if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-e;if((void 0===n||n>d)&&(n=d),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let h=!1;for(;;)switch(r){case"hex":return function(t,e,n,r){let i;n=Number(n)||0;let o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;let s=e.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){let r=parseInt(e.substr(2*i,2),16);if(r!=r)break;t[n+i]=r}return i}(this,t,e,n);case"utf8":case"utf-8":return i=e,o=n,B(L(t,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=e,u=n,B(function(t){let e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(t),this,s,u);case"base64":return a=e,c=n,B(N(t),this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=e,f=n,B(function(t,e){let n,r;let i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,this.length-l),this,l,f);default:if(h)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){let n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=M(function(t){C(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&R(t,this.length-8);let r=e+256*this[++t]+65536*this[++t]+16777216*this[++t],i=this[++t]+256*this[++t]+65536*this[++t]+16777216*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),u.prototype.readBigUInt64BE=M(function(t){C(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&R(t,this.length-8);let r=16777216*e+65536*this[++t]+256*this[++t]+this[++t],i=16777216*this[++t]+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||w(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return(t>>>=0,e||w(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||w(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||w(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=M(function(t){C(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&R(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),u.prototype.readBigInt64BE=M(function(t){C(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&R(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+n)}),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;E(this,t,e,n,r,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;E(this,t,e,n,r,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=M(function(t,e=0){return I(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=M(function(t,e=0){return _(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);E(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);E(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||E(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=M(function(t,e=0){return I(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=M(function(t,e=0){return _(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(t,e,n){return T(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return T(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return A(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return A(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){let i;if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){let e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{let o=u.isBuffer(t)?t:u.from(t,r),s=o.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};let k={};function O(t,e,n){k[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function P(t){let e="",n=t.length,r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function x(t,e,n,r,i,o){if(t>n||t<e){let r;let i="bigint"==typeof e?"n":"";throw r=o>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new k.ERR_OUT_OF_RANGE("value",r,t)}C(i,"offset"),(void 0===r[i]||void 0===r[i+o])&&R(i,r.length-(o+1))}function C(t,e){if("number"!=typeof t)throw new k.ERR_INVALID_ARG_TYPE(e,"number",t)}function R(t,e,n){if(Math.floor(t)!==t)throw C(t,n),new k.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new k.ERR_BUFFER_OUT_OF_BOUNDS;throw new k.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),O("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?i=P(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=P(i)),i+="n"),r+=` It must be ${e}. Received ${i}`},RangeError);let U=/[^+/0-9A-Za-z-_]/g;function L(t,e){let n;e=e||1/0;let r=t.length,i=null,o=[];for(let s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319||s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function N(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function D(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}let j=function(){let t="0123456789abcdef",e=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function M(t){return"undefined"==typeof BigInt?q:t}function q(){throw Error("BigInt not supported")}},6868:function(t,e){e.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,c=a>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=u;l>0;o=256*o+t[e+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,u,a,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?5960464477539062e-23:0,h=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(u=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+f>=1?e+=d/a:e+=d*Math.pow(2,1-f),e*a>=2&&(s++,a/=2),s+f>=l?(u=0,s=l):s+f>=1?(u=(e*a-1)*Math.pow(2,i),s+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&u,h+=p,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[n+h]=255&s,h+=p,s/=256,c-=8);t[n+h-p]|=128*v}},10632:function(t,e,n){var r=n(9109),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return r.SlowBuffer(t)}},25566:function(t){var e,n,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var a=[],c=!1,l=-1;function f(){c&&r&&(c=!1,r.length?a=r.concat(a):l=-1,a.length&&d())}function d(){if(!c){var t=u(f);c=!0;for(var e=a.length;e;){for(r=a,a=[];++l<e;)r&&r[l].run();l=-1,e=a.length}r=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new h(t,e)),1!==a.length||c||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}}]);